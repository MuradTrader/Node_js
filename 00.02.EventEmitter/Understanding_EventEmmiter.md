### –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ EventEmitter –≤ Node.js

#### **1. –í–≤–µ–¥–µ–Ω–∏–µ –≤ EventEmitter**

EventEmitter ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç –≤ Node.js, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–±—ã—Ç–∏—è–º–∏. –û–Ω —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥.

- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞.
- **–†–µ—à–µ–Ω–∏–µ**: EventEmitter –ø–æ–∑–≤–æ–ª—è–µ—Ç "–ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è" –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ "–≤—ã–∑—ã–≤–∞—Ç—å" –∏—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

> **–í–∞–∂–Ω–æ**: EventEmitter —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript –∏ –Ω–µ —Å–≤—è–∑–∞–Ω –Ω–∞–ø—Ä—è–º—É—é —Å libuv, event loop –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è. –≠—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–æ–º.

---

#### **2. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å EventEmitter:

```javascript
// –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è events
const EventEmitter = require("events");

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞, –Ω–∞—Å–ª–µ–¥—É—é—â–µ–≥–æ EventEmitter
class Emitter extends EventEmitter {}
const myEmitter = new Emitter();

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ 'foo'
myEmitter.on("foo", () => {
  console.log("–°–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ!");
});

// –í—ã–∑–æ–≤ —Å–æ–±—ã—Ç–∏—è 'foo'
myEmitter.emit("foo"); // –í—ã–≤–æ–¥: "–°–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ!"
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è**:

- `require('events')` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å EventEmitter.
- `class Emitter extends EventEmitter` –Ω–∞—Å–ª–µ–¥—É–µ—Ç –º–µ—Ç–æ–¥—ã EventEmitter.
- `.on(eventName, callback)` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–æ–±—ã—Ç–∏—è.
- `.emit(eventName)` –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.

---

#### **3. –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã EventEmitter**

##### **–ê–Ω–∞–ª–æ–≥–∏—è —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π**

- **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –û–¥–∏–Ω —è–¥—Ä–æ CPU –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É), —á—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (Event-Driven)**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ (—Å–æ–±—ã—Ç–∏–µ) –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏. CPU –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ–≥–æ –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞.

##### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ EventEmitter**

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è**:
  ```javascript
  {
    'foo': [callback1, callback2, ...], // –ú–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Å–æ–±—ã—Ç–∏—è 'foo'
    'bar': [callback3]                 // –ú–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Å–æ–±—ã—Ç–∏—è 'bar'
  }
  ```
- **–ú–µ—Ç–æ–¥—ã**:
  - `.on('event', callback)` –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.
  - `.emit('event')` –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Å–æ–±—ã—Ç–∏—è.

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**:

```
emit('foo')
‚îÇ
‚îú‚îÄ> –í—ã–ø–æ–ª–Ω—è–µ—Ç callback1()
‚îú‚îÄ> –í—ã–ø–æ–ª–Ω—è–µ—Ç callback2()
‚îî‚îÄ> ...
```

---

#### **4. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**

```javascript
const EventEmitter = require("events");
class Emitter extends EventEmitter {}
const myE = new Emitter();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è 'foo'
myE.on("foo", () => {
  console.log("–°–æ–±—ã—Ç–∏–µ 1");
});

myE.on("foo", () => {
  console.log("–°–æ–±—ã—Ç–∏–µ 2");
});

myE.on("foo", (x) => {
  console.log(`–°–æ–±—ã—Ç–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º: ${x}`);
});

// –í—ã–∑–æ–≤ —Å–æ–±—ã—Ç–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
myE.emit("foo", "Hello!");
```

**–í—ã–≤–æ–¥**:

```
–°–æ–±—ã—Ç–∏–µ 1
–°–æ–±—ã—Ç–∏–µ 2
–°–æ–±—ã—Ç–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º: Hello!
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `emit(eventName, ...args)`.

---

#### **5. –ú–µ—Ç–æ–¥ `once()`**

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–µ–¥–∏–Ω–æ–∂–¥—ã** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞:

```javascript
myE.once("bar", () => {
  console.log("–°—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!");
});

myE.emit("bar"); // –í—ã–≤–æ–¥: "–°—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!"
myE.emit("bar"); // –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã**:  
–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—ã–∑–æ–≤–∞, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Å–æ–±—ã—Ç–∏–π.

---

#### **6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

–î–ª—è –æ—Ç–ª–æ–≤–∞ –æ—à–∏–±–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ `'error'`:

```javascript
myE.on("error", (err) => {
  console.error("–û—à–∏–±–∫–∞:", err.message);
});

myE.emit("error", new Error("–ß—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å!"));
// –í—ã–≤–æ–¥: "–û—à–∏–±–∫–∞: –ß—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å!"
```

> **–í–∞–∂–Ω–æ**: –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ `'error'` –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ, Node.js –∑–∞–≤–µ—Ä—à–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å.

---

#### **7. –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã EventEmitter**

–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Node.js](https://nodejs.org/api/events.html):

- `listenerCount(eventName)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Å–æ–±—ã—Ç–∏—è.
- `removeListener(eventName, callback)` —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
- `eventNames()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–º–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.

–ü—Ä–∏–º–µ—Ä:

```javascript
console.log(myE.listenerCount("foo")); // –í—ã–≤–æ–¥: 3
```

---

#### **8. –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è EventEmitter**

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ —Å—Ç–∞—Ç—å–∏ [How to Code Your Own Event Emitter](https://www.freecodecamp.org/news/how-to-code-your-own-event-emitter-in-node-js-a-step-by-step-guide-e13b7e7908e1/):

```javascript
class CustomEmitter {
  constructor() {
    this.events = {};
  }

  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }

  emit(event, ...args) {
    if (this.events[event]) {
      this.events[event].forEach((listener) => {
        listener.apply(this, args);
      });
    }
  }

  once(event, listener) {
    const wrapper = (...args) => {
      listener.apply(this, args);
      this.removeListener(event, wrapper);
    };
    this.on(event, wrapper);
  }

  removeListener(event, targetListener) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(
        (listener) => listener !== targetListener
      );
    }
  }
}

module.exports = CustomEmitter;
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:

```javascript
const CustomEmitter = require("./CustomEmitter");
const emitter = new CustomEmitter();
// –î–∞–ª–µ–µ –∫–∞–∫ —Å –Ω–∞—Ç–∏–≤–Ω—ã–º EventEmitter!
```

–†–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ—Ç JavaScript-–∫–æ–¥ **–¥–æ –∞—Ç–æ–º–æ–≤** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ, –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, —Å–æ –≤—Å–µ–º–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ JavaScript, –≤–∫–ª—é—á–∞—è –ø–∞–º—è—Ç—å, –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏, –º–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–∞, `this`, –∏ —Ç.–¥.

---

## üì¶ –û–±—â–∏–π –æ–±–∑–æ—Ä

–≠—Ç–æ—Ç –∫–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ–±—ã—Ç–∏–π–Ω–æ–≥–æ —ç–º–∏—Ç—Ç–µ—Ä–∞** ‚Äî –∞–Ω–∞–ª–æ–≥–∞ `EventEmitter` –∏–∑ Node.js. –¢–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç:

- –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–µ–π –Ω–∞ —Å–æ–±—ã—Ç–∏—è (`on`)
- –∏—Å–ø—É—Å–∫–∞—Ç—å —Å–æ–±—ã—Ç–∏—è (`emit`)
- –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏ (`once`)
- —É–¥–∞–ª—è—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–µ–π (`removeListener`)

---

## üîç –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä

### \`\`\`js

class CustomEmitter {

````

- `class` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ ES6 (ECMAScript 2015), –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–∫–ª–∞—Å—Å**, —Ç–æ –µ—Å—Ç—å **—à–∞–±–ª–æ–Ω** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º (–º–µ—Ç–æ–¥–∞–º–∏).
- `CustomEmitter` ‚Äî –∏–º—è –∫–ª–∞—Å—Å–∞ (–ø–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã).

---

### ```js
  constructor() {
    this.events = {};
  }
````

#### `constructor()`:

- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ `new CustomEmitter()`.
- `this` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ **–Ω–æ–≤–æ—Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â—ë–Ω.

#### `this.events = {}`:

- –°–æ–∑–¥–∞—ë—Ç —É –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ** —Å–≤–æ–π—Å—Ç–≤–æ `events` ‚Äî —ç—Ç–æ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç.
- –û–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ **—Ç–∞–±–ª–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π**: –∫–ª—é—á–∏ ‚Äî –∏–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏–π, –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –º–∞—Å—Å–∏–≤—ã —Å–ª—É—à–∞—Ç–µ–ª–µ–π.

üîß –í –ø–∞–º—è—Ç–∏:

```js
{
  events: {
    /* eventName: [listeners] */
  }
}
```

---

## üì• –ú–µ—Ç–æ–¥ `.on()`

```js
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –ü–æ–∑–≤–æ–ª—è–µ—Ç **–¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (listener)** –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ.

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã:

- `event` ‚Äî –∏–º—è —Å–æ–±—ã—Ç–∏—è (—Å—Ç—Ä–æ–∫–∞).
- `listener` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–∏ —ç—Ç–æ–º —Å–æ–±—ã—Ç–∏–∏.

### –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:

1. `this.events[event]` ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –æ–±—ä–µ–∫—Ç—É `events` –ø–æ –∫–ª—é—á—É (–∏–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è).
2. `if (!this.events[event])` ‚Äî –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—ë–º –µ–≥–æ.
3. `this.events[event].push(listener)` ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ –º–∞—Å—Å–∏–≤.

üí° –í JavaScript –æ–±—ä–µ–∫—Ç `events` –ø–æ —Å—É—Ç–∏ ‚Äî —ç—Ç–æ **–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤** (hash map), –≥–¥–µ –∫–ª—é—á ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ (–∏–º—è —Å–æ–±—ã—Ç–∏—è), –∞ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –º–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–π.

---

## üì£ –ú–µ—Ç–æ–¥ `.emit()`

```js
  emit(event, ...args) {
    if (this.events[event]) {
      this.events[event].forEach(listener => {
        listener.apply(this, args);
      });
    }
  }
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- **–ò—Å–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ**, –≤—ã–∑—ã–≤–∞—è –≤—Å–µ—Ö —Å–ª—É—à–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ `event`.

### –ê—Ä–≥—É–º–µ–Ω—Ç—ã:

- `event` ‚Äî –∏–º—è —Å–æ–±—ã—Ç–∏—è.
- `...args` ‚Äî –ª—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞—é—â–∏–µ—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.

### –î–µ—Ç–∞–ª–∏:

- `if (this.events[event])` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å–ª—É—à–∞—Ç–µ–ª–∏.
- `forEach(listener => ...)` ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –º–∞—Å—Å–∏–≤—É —Å–ª—É—à–∞—Ç–µ–ª–µ–π –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π.

### `listener.apply(this, args)`:

- `apply()` ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ JS:

  - –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç (`this`) ‚Äî —á—Ç–æ –±—É–¥–µ—Ç `this` –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
  - –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç (`args`) ‚Äî –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.

- –ó–¥–µ—Å—å `this` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `apply()` —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–º–∏—Ç—Ç–µ—Ä–∞.

---

## üîÇ –ú–µ—Ç–æ–¥ `.once()`

```js
  once(event, listener) {
    const wrapper = (...args) => {
      listener.apply(this, args);
      this.removeListener(event, wrapper);
    };
    this.on(event, wrapper);
  }
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è ‚Äî –æ–Ω –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

### –ú–µ—Ö–∞–Ω–∏–∑–º:

1. –°–æ–∑–¥–∞—ë—Ç **–æ–±—ë—Ä—Ç–∫—É** `wrapper`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç `listener`, –∞ –∑–∞—Ç–µ–º —É–¥–∞–ª—è–µ—Ç —Å–µ–±—è.
2. –û–±—ë—Ä—Ç–∫–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ `this.on(event, wrapper)` –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
3. –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `emit`, –æ–±—ë—Ä—Ç–∫–∞ —É–¥–∞–ª—è–µ—Ç —Å–µ–±—è –∏–∑ –º–∞—Å—Å–∏–≤–∞.

üîç –ü–æ—á–µ–º—É –æ–±—ë—Ä—Ç–∫–∞ –Ω—É–∂–Ω–∞:

- –ß—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —É–¥–∞–ª–∏—Ç—å –∏–º–µ–Ω–Ω–æ `wrapper`, –∞ –Ω–µ `listener`, —Ç–∞–∫ –∫–∞–∫ `removeListener` —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ.

---

## ‚ùå –ú–µ—Ç–æ–¥ `.removeListener()`

```js
  removeListener(event, targetListener) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(
        listener => listener !== targetListener
      );
    }
  }
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è `targetListener` –∏–∑ –º–∞—Å—Å–∏–≤–∞ –ø–æ –∏–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è `event`.

### –ö–∞–∫:

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –º–∞—Å—Å–∏–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `.filter()`:

  - –°–æ–∑–¥–∞—ë—Ç **–Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤**, –∏—Å–∫–ª—é—á–∞—è `targetListener`.
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç –ø–æ **—Å—Å—ã–ª–∫–µ** –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é (`===`).

üîß –í–∞–∂–Ω–æ:

- –î–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ JS —Ä–∞–≤–Ω—ã (`===`) **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è –≤ –ø–∞–º—è—Ç–∏**.
- –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É `.once()` —Å–æ–∑–¥–∞—ë—Ç –æ–±—ë—Ä—Ç–∫—É ‚Äî —á—Ç–æ–±—ã –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É.

---

## üì§ –≠–∫—Å–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ (Node.js)

```js
module.exports = CustomEmitter;
```

- `module.exports` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Node.js.
- –î–µ–ª–∞–µ—Ç `CustomEmitter` **–¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö** —Å –ø–æ–º–æ—â—å—é `require()`.

–ü—Ä–∏–º–µ—Ä:

```js
const CustomEmitter = require("./CustomEmitter");
const emitter = new CustomEmitter();
```

---

## üß† –í—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –ø–∞–º—è—Ç–∏

–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å:

```js
const emitter = new CustomEmitter();

function greet(name) {
  console.log("Hello,", name);
}

emitter.on("sayHi", greet);
emitter.emit("sayHi", "Murad");
```

–í –ø–∞–º—è—Ç–∏:

```js
emitter = {
  events: {
    sayHi: [greet],
  },
};
```

---

## üß© –í—ã–≤–æ–¥

| –ú–µ—Ç–æ–¥            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                     | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                            |
| ---------------- | ---------------------------------------------- | -------------------------------------- |
| `constructor`    | –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π             | `this.events = {}`                     |
| `on`             | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏—è                 | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –º–∞—Å—Å–∏–≤ –ø–æ –∏–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è    |
| `emit`           | –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ—Ö —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏—è              | –ü–µ—Ä–µ–¥–∞—ë—Ç –∏–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã                  |
| `once`           | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è            | –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è ‚Äî —É–¥–∞–ª—è–µ—Ç—Å—è |
| `removeListener` | –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è | –§—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ         |

---

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç ‚Äî –¥–∞–≤–∞–π –æ–±—ä—è—Å–Ω—é **–ø—Ä–µ–¥–µ–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –Ω–∞–≥–ª—è–¥–Ω–æ**, –∑–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

```js
listener.apply(this, args);
```

–≤ –º–µ—Ç–æ–¥–∞—Ö `emit()` –∏ `once()`.

---

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ `Function.prototype.apply()`?

`apply()` ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ JavaScript.

–ü–æ–ª–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞:

```js
func.apply(thisArg, argsArray);
```

- **`thisArg`** ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ `this` –≤–Ω—É—Ç—Ä–∏ `func`.
- **`argsArray`** ‚Äî –º–∞—Å—Å–∏–≤ (–∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç), —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ **–∞—Ä–≥—É–º–µ–Ω—Ç—ã** –≤ `func`.

---

## üì¶ –ü—Ä–∏–º–µ—Ä –±–µ–∑ `.apply()`

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —É –Ω–∞—Å –µ—Å—Ç—å:

```js
function sayHello(name, age) {
  console.log(`${this.prefix} ${name}, age ${age}`);
}

const context = { prefix: "üëã Hello" };

sayHello("Murad", 30); // undefined Murad, age 30
```

`this.prefix` –∑–¥–µ—Å—å –±—É–¥–µ—Ç `undefined`, –ø–æ—Ç–æ–º—É —á—Ç–æ `this` ‚Äî —ç—Ç–æ `undefined` (–≤ —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ) –∏–ª–∏ `window` (–≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ strict mode).

–ß—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å `this`, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `apply()`:

```js
sayHello.apply(context, ["Murad", 30]);
// üëã Hello Murad, age 30
```

---

## üß† –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ `listener.apply(this, args)`

–¢–µ–ø–µ—Ä—å ‚Äî –∫ –Ω–∞—à–µ–º—É –∫–æ–¥—É:

```js
listener.apply(this, args);
```

### ‚úÖ –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- `listener` ‚Äî —ç—Ç–æ **—Ñ—É–Ω–∫—Ü–∏—è-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è** (–∫–æ—Ç–æ—Ä—É—é –∫—Ç–æ-—Ç–æ –¥–æ–±–∞–≤–∏–ª —á–µ—Ä–µ–∑ `.on()` –∏–ª–∏ `.once()`).
- `.apply(this, args)` –≤—ã–∑—ã–≤–∞–µ—Ç –µ—ë –∏:

  - –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –Ω–µ—ë –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ `args`, –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
  - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `this` –≤–Ω—É—Ç—Ä–∏ `listener` —Ä–∞–≤–Ω—ã–º `this` —Ç–µ–∫—É—â–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `CustomEmitter`.

---

### üîç –ê —á—Ç–æ –±—É–¥–µ—Ç –±–µ–∑ `.apply()`?

–ï—Å–ª–∏ –±—ã —Ç—ã –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ—Å—Ç–æ:

```js
listener(args); // ‚ùå
```

–¢—ã –±—ã –ø–µ—Ä–µ–¥–∞–ª **–æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî –º–∞—Å—Å–∏–≤**, –∞ –Ω–µ —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π.

–ê –µ—Å–ª–∏ –±—ã –Ω–∞–ø–∏—Å–∞–ª:

```js
listener(...args); // ‚úÖ
```

–≠—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–æ–≥ `.apply()`, –Ω–æ:

```js
listener(...args);
```

**–Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `this`** ‚Äî –≤–Ω—É—Ç—Ä–∏ `listener` `this` –±—É–¥–µ—Ç `undefined` (–≤ strict mode) –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç.

---

## üß™ –ü—Ä–∏–º–µ—Ä, –≥–¥–µ `this` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–µ–Ω

```js
class CustomEmitter {
  constructor() {
    this.name = "CustomEmitterInstance";
    this.events = {};
  }

  on(event, listener) {
    if (!this.events[event]) this.events[event] = [];
    this.events[event].push(listener);
  }

  emit(event, ...args) {
    this.events[event]?.forEach((listener) => {
      listener.apply(this, args);
    });
  }
}

const emitter = new CustomEmitter();

function myListener(data) {
  console.log(this.name); // ‚Üê –≤–æ—Ç –∑–¥–µ—Å—å –≤–∞–∂–Ω–æ!
  console.log("Received:", data);
}

emitter.on("myEvent", myListener);
emitter.emit("myEvent", "someData");
```

### –í—ã–≤–æ–¥:

```
CustomEmitterInstance
Received: someData
```

–ï—Å–ª–∏ –±—ã —Ç—ã –Ω–∞–ø–∏—Å–∞–ª:

```js
listener(...args);
```

–¢–æ –≤–Ω—É—Ç—Ä–∏ `myListener` `this.name` —Å—Ç–∞–ª –±—ã `undefined`.

---

## ‚úÖ –ó–∞—á–µ–º `apply(this, args)` –Ω—É–∂–µ–Ω:

| –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                       | –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ                            |
| -------------------------------- | ------------------------------------------- |
| –í—ã–∑—ã–≤–∞–µ—Ç `listener()`            | –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏—è               |
| –ü–µ—Ä–µ–¥–∞—ë—Ç –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏–∑ `emit` | –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–æ—Ö–æ–¥—è—Ç –¥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞   |
| –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `this` –Ω–∞ —ç–º–∏—Ç—Ç–µ—Ä  | –í–Ω—É—Ç—Ä–∏ `listener` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `this` |

---

## üìå –ü–æ–¥–≤–µ–¥—ë–º –∏—Ç–æ–≥

```js
listener.apply(this, args);
```

- üîÅ –í—ã–∑—ã–≤–∞–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏—è (`listener`)
- üîó –ü–µ—Ä–µ–¥–∞—ë—Ç –µ–º—É –∞—Ä–≥—É–º–µ–Ω—Ç—ã (`args`) –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–µ –º–∞—Å—Å–∏–≤
- üìç –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `this` –≤–Ω—É—Ç—Ä–∏ —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–∞ —Ç–µ–∫—É—â–∏–π `CustomEmitter`, —á—Ç–æ–±—ã —Å–ª—É—à–∞—Ç–µ–ª—å –º–æ–≥ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –º–µ—Ç–æ–¥–∞–º/—Å–≤–æ–π—Å—Ç–≤–∞–º —ç–º–∏—Ç—Ç–µ—Ä–∞

---

---

#### **9. –†–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ EventEmitter –≤ Node.js**

–ö–æ–¥ –∏–∑ [–∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ Node.js (events.js)](https://github.com/nodejs/node/blob/master/lib/events.js):

- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞—Ö (–Ω–µ –∫–ª–∞—Å—Å–∞—Ö ES6).
- –°–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
- –ö–ª—é—á–µ–≤–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞ `emit`:

  ```javascript
  EventEmitter.prototype.emit = function emit(type, ...args) {
    const events = this._events;
    const handler = events[type];
    if (handler === undefined) return false;

    if (typeof handler === "function") {
      handler.apply(this, args);
    } else {
      // –ú–∞—Å—Å–∏–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
      const listeners = handler.slice();
      for (let i = 0; i < listeners.length; i++) {
        listeners[i].apply(this, args);
      }
    }
    return true;
  };
  ```

---

#### **10. –ò—Ç–æ–≥–∏**

- **EventEmitter** ‚Äî —è–¥—Ä–æ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –º–æ–¥–µ–ª–∏ Node.js.
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤**:
  - –ú–æ–¥—É–ª—è—Ö `stream`, `http`, `net`.
  - –ü–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Express.js).
- **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**: `.on()`, `.emit()`, `.once()`.
- **–í–∞–∂–Ω–æ**: –≠—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω JavaScript, –∞ –Ω–µ —á–∞—Å—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ libuv.

> **–°–æ–≤–µ—Ç**: –î–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–∑—É—á–∏—Ç–µ [–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ EventEmitter](https://github.com/nodejs/node/blob/master/lib/events.js) –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π.
