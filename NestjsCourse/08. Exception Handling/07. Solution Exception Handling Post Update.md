## üéØ **–û–°–ù–û–í–ù–ê–Ø –¶–ï–õ–¨ –£–†–û–ö–ê**

–ê–≤—Ç–æ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π** –≤ –º–µ—Ç–æ–¥–µ `update` PostsService, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –µ—Å—Ç—å —Å–ª–æ–∂–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞.

## üîç **–®–ê–ì 1: –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í –í –ú–ï–¢–û–î–ï UPDATE**

### **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –º–µ—Ç–æ–¥–∞ update (–¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π):**

```typescript
public async update(patchPostDto: PatchPostDto) {
  // ‚ùå –†–ò–°–ö 1: –ó–∞–ø—Ä–æ—Å —Ç–µ–≥–æ–≤ –∫ –ë–î
  let tags = await this.tagsService.findMultipleTags(patchPostDto.tags);

  // ‚ùå –†–ò–°–ö 2: –ó–∞–ø—Ä–æ—Å –ø–æ—Å—Ç–∞ –∫ –ë–î
  let post = await this.postsRepository.findOneBy({
    id: patchPostDto.id,
  });

  // ‚ùå –†–ò–°–ö 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
  post.tags = tags;

  // ‚ùå –†–ò–°–ö 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ –≤ –ë–î
  return await this.postsRepository.save(post);
}
```

## üö® **–®–ê–ì 2: –í–´–Ø–í–õ–ï–ù–ò–ï –í–°–ï–• –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–• –û–®–ò–ë–û–ö**

### **1. –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**

```typescript
// –õ—é–±–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –ë–î –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å:
await this.tagsService.findMultipleTags(); // ‚Üí –¢–∞–π–º–∞—É—Ç/—Ä–∞–∑—Ä—ã–≤
await this.postsRepository.findOneBy(); // ‚Üí –¢–∞–π–º–∞—É—Ç/—Ä–∞–∑—Ä—ã–≤
await this.postsRepository.save(); // ‚Üí –¢–∞–π–º–∞—É—Ç/—Ä–∞–∑—Ä—ã–≤
```

### **2. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:**

**–°—Ü–µ–Ω–∞—Ä–∏–π —Å —Ç–µ–≥–∞–º–∏:**

```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: [1, 2, 3] (3 —Ç–µ–≥–∞)
// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç: [1, 2] (2 —Ç–µ–≥–∞)
// –ü—Ä–æ–±–ª–µ–º–∞: —Ç–µ–≥ —Å ID=3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ—Å—Ç –ø–æ–ª—É—á–∏—Ç —Ç–æ–ª—å–∫–æ 2 —Ç–µ–≥–∞ –≤–º–µ—Å—Ç–æ 3 - –º–æ–ª—á–∞–ª–∏–≤–∞—è –æ—à–∏–±–∫–∞!
```

**–°—Ü–µ–Ω–∞—Ä–∏–π —Å –ø–æ—Å—Ç–æ–º:**

```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: { id: 999 }
// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –ø–æ—Å—Ç —Å ID=999 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
// –ü—Ä–æ–±–ª–µ–º–∞: –ø—ã—Ç–∞–µ–º—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ—Å—Ç!
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ—à–∏–±–∫–∞ –∏–ª–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
```

## üîß **–®–ê–ì 3: –ü–û–°–¢–†–û–ï–ù–ò–ï –ó–ê–©–ò–©–ï–ù–ù–û–ì–û –ú–ï–¢–û–î–ê UPDATE**

### **–®–∞–≥ 3.1: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π**

```typescript
public async update(patchPostDto: PatchPostDto) {
  // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  let tags;    // –ë—É–¥–µ—Ç undefined –¥–æ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
  let post;    // –ë—É–¥–µ—Ç undefined –¥–æ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

  // –£–±–∏—Ä–∞–µ–º 'let' –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π, —Ç–∞–∫ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –æ–±—ä—è–≤–ª–µ–Ω—ã
  // let tags = await ...  ‚Üê –£–î–ê–õ–ò–¢–¨ 'let'
  // let post = await ...  ‚Üê –£–î–ê–õ–ò–¢–¨ 'let'
}
```

### **–®–∞–≥ 3.2: –ó–∞—â–∏—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–≥–æ–≤**

```typescript
// üõ°Ô∏è –ó–ê–©–ò–¢–ê: –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–≥–æ–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π
try {
  tags = await this.tagsService.findMultipleTags(patchPostDto.tags);
} catch (error) {
  // üéØ –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
  throw new RequestTimeoutException(
    "Unable to process your request at the moment. Please try later."
  );
}
```

### **–®–∞–≥ 3.3: –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –¥–ª—è —Ç–µ–≥–æ–≤**

```typescript
// üéØ –ü–†–û–í–ï–†–ö–ê 1: –¢–µ–≥–∏ –≤–æ–æ–±—â–µ –Ω–∞–π–¥–µ–Ω—ã?
if (!tags) {
  throw new BadRequestException(
    "Please check your tag IDs and ensure they are correct."
  );
}

// üéØ –ü–†–û–í–ï–†–ö–ê 2: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤ —Å–æ–≤–ø–∞–¥–∞–µ—Ç?
if (tags.length !== patchPostDto.tags?.length) {
  throw new BadRequestException(
    "Please check your tag IDs and ensure they are correct."
  );
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–µ–≥–æ–≤:**

```typescript
// –°—Ü–µ–Ω–∞—Ä–∏–π: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª —Ç–µ–≥–∏ [1, 2, 3]
// –†–µ–∑—É–ª—å—Ç–∞—Ç –ë–î: –Ω–∞—à–µ–ª —Ç–µ–≥–∏ [1, 2] (—Ç–µ–≥ 3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

// –ü—Ä–æ–≤–µ—Ä–∫–∞:
tags.length ‚Üí 2
patchPostDto.tags.length ‚Üí 3
2 !== 3 ‚Üí true ‚Üí –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ!
```

### **–®–∞–≥ 3.4: –ó–∞—â–∏—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–∞**

```typescript
// üõ°Ô∏è –ó–ê–©–ò–¢–ê: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π
try {
  post = await this.postsRepository.findOneBy({
    id: patchPostDto.id,
  });
} catch (error) {
  // üéØ –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
  throw new RequestTimeoutException(
    "Unable to process your request at the moment. Please try later."
  );
}

// üéØ –ü–†–û–í–ï–†–ö–ê: –ü–æ—Å—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
if (!post) {
  throw new BadRequestException("The post ID does not exist.");
}
```

### **–®–∞–≥ 3.5: –ó–∞—â–∏—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–∞**

```typescript
// üõ°Ô∏è –ó–ê–©–ò–¢–ê: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π
try {
  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–≥–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ - –≤ –ø–∞–º—è—Ç–∏)
  post.tags = tags;

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î (–æ–ø–∞—Å–Ω–æ - –Ω—É–∂–µ–Ω try-catch)
  return await this.postsRepository.save(post);
} catch (error) {
  // üéØ –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
  throw new RequestTimeoutException(
    "Unable to process your request at the moment. Please try later."
  );
}
```

## üéØ **–®–ê–ì 4: –ü–û–õ–ù–´–ô –ó–ê–©–ò–©–ï–ù–ù–´–ô –ö–û–î**

### **–ò—Ç–æ–≥–æ–≤—ã–π –º–µ—Ç–æ–¥ update –ø–æ—Å–ª–µ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π:**

```typescript
import { BadRequestException, RequestTimeoutException } from '@nestjs/common';

public async update(patchPostDto: PatchPostDto) {
  // üéØ –®–ê–ì 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  let tags;
  let post;

  // üéØ –®–ê–ì 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–≥–æ–≤
  try {
    tags = await this.tagsService.findMultipleTags(patchPostDto.tags);
  } catch (error) {
    throw new RequestTimeoutException(
      'Unable to process your request at the moment. Please try later.'
    );
  }

  // üéØ –ë–ò–ó–ù–ï–°-–ü–†–ê–í–ò–õ–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ç–µ–≥–æ–≤
  if (!tags || tags.length !== patchPostDto.tags?.length) {
    throw new BadRequestException(
      'Please check your tag IDs and ensure they are correct.'
    );
  }

  // üéØ –®–ê–ì 3: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å—Ç–∞
  try {
    post = await this.postsRepository.findOneBy({
      id: patchPostDto.id,
    });
  } catch (error) {
    throw new RequestTimeoutException(
      'Unable to process your request at the moment. Please try later.'
    );
  }

  // üéØ –ë–ò–ó–ù–ï–°-–ü–†–ê–í–ò–õ–û: –ü–æ—Å—Ç –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
  if (!post) {
    throw new BadRequestException('The post ID does not exist.');
  }

  // üéØ –®–ê–ì 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  try {
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
    post.tags = tags;

    // –û–ø–∞—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è - –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ try-catch
    return await this.postsRepository.save(post);
  } catch (error) {
    throw new RequestTimeoutException(
      'Unable to process your request at the moment. Please try later.'
    );
  }
}
```

## üîç **–®–ê–ì 5: –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ò**

### **–ü–æ—á–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ–≥–æ–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞:**

```typescript
// –ë–ï–ó –ü–†–û–í–ï–†–ö–ò (–æ–ø–∞—Å–Ω–æ):
// –ó–∞–ø—Ä–æ—Å: –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç —Å —Ç–µ–≥–∞–º–∏ [1, 2, 3]
// –†–µ–∑—É–ª—å—Ç–∞—Ç –ë–î: —Ç–µ–≥–∏ [1, 2] (—Ç–µ–≥ 3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
// –ò—Ç–æ–≥: –ø–æ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–≥–∏ [1, 2] - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ!

// –° –ü–†–û–í–ï–†–ö–û–ô (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
// –ó–∞–ø—Ä–æ—Å: –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç —Å —Ç–µ–≥–∞–º–∏ [1, 2, 3]
// –†–µ–∑—É–ª—å—Ç–∞—Ç –ë–î: —Ç–µ–≥–∏ [1, 2] (—Ç–µ–≥ 3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
// –ò—Ç–æ–≥: BadRequestException - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ!
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:**

**PatchPostDto:**

```typescript
{
  id: 1,           // ID –ø–æ—Å—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  tags: [1, 2, 3]  // –ú–∞—Å—Å–∏–≤ ID —Ç–µ–≥–æ–≤
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç tagsService.findMultipleTags([1, 2, 3]):**

```typescript
// –ï—Å–ª–∏ –≤—Å–µ —Ç–µ–≥–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
[
  { id: 1, name: "JavaScript", slug: "javascript" },
  { id: 2, name: "TypeScript", slug: "typescript" },
  { id: 3, name: "NestJS", slug: "nestjs" },
][
  // –ï—Å–ª–∏ —Ç–µ–≥ 3 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
  ({ id: 1, name: "JavaScript", slug: "javascript" },
  { id: 2, name: "TypeScript", slug: "typescript" })
  // ‚ùå –¢–µ–≥ 3 –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!
];
```

## üß™ **–®–ê–ì 6: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –í–°–ï–• –°–¶–ï–ù–ê–†–ò–ï–í**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**

```typescript
// –í—Ö–æ–¥: –≤–∞–ª–∏–¥–Ω—ã–π postId, –≤—Å–µ —Ç–µ–≥–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
// –û–∂–∏–¥–∞–Ω–∏–µ: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Å—Ç
// –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ‚úÖ –£—Å–ø–µ—Ö
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ–≥**

```typescript
// –í—Ö–æ–¥: —Ç–µ–≥–∏ [1, 2, 999] (999 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
// –û–∂–∏–¥–∞–Ω–∏–µ: BadRequestException
// –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ‚úÖ "Please check your tag IDs..."
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ—Å—Ç**

```typescript
// –í—Ö–æ–¥: postId = 999999
// –û–∂–∏–¥–∞–Ω–∏–µ: BadRequestException
// –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ‚úÖ "The post ID does not exist."
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ–≥–æ–≤**

```typescript
// –í—Ö–æ–¥: –ë–î –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤–æ –≤—Ä–µ–º—è findMultipleTags()
// –û–∂–∏–¥–∞–Ω–∏–µ: RequestTimeoutException
// –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ‚úÖ "Unable to process your request..."
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 5: –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏**

```typescript
// –í—Ö–æ–¥: –ë–î –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤–æ –≤—Ä–µ–º—è save()
// –û–∂–∏–¥–∞–Ω–∏–µ: RequestTimeoutException
// –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: ‚úÖ "Unable to process your request..."
```

## üí° **–®–ê–ì 7: –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø**

### **–£–ª—É—á—à–µ–Ω–∏–µ 1: –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**

```typescript
// –í–º–µ—Å—Ç–æ –æ–±—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
if (!tags || tags.length !== patchPostDto.tags?.length) {
  const requestedCount = patchPostDto.tags?.length || 0;
  const foundCount = tags?.length || 0;

  throw new BadRequestException(
    `Requested ${requestedCount} tags but found ${foundCount}. Please check your tag IDs.`,
    {
      description: "Tag ID mismatch",
      requestedTags: patchPostDto.tags,
      foundTags: tags?.map((tag) => tag.id),
      missingCount: requestedCount - foundCount,
    }
  );
}
```

### **–£–ª—É—á—à–µ–Ω–∏–µ 2: –í—ã–Ω–µ—Å–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞**

```typescript
private handleDatabaseError(operation: string): never {
  throw new RequestTimeoutException(
    'Unable to process your request at the moment. Please try later.',
    {
      description: `Database error during ${operation}`,
      operation,
      timestamp: new Date().toISOString()
    }
  );
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
try {
  tags = await this.tagsService.findMultipleTags(patchPostDto.tags);
} catch (error) {
  this.handleDatabaseError('fetching tags');
}
```

### **–£–ª—É—á—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —Å–µ–º–∞–Ω—Ç–∏—á–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π**

```typescript
import { NotFoundException } from "@nestjs/common";

// –î–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ—Å—Ç–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
if (!post) {
  throw new NotFoundException(`Post with ID ${patchPostDto.id} not found.`);
}

// –î–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–≥–æ–≤:
if (!tags || tags.length !== patchPostDto.tags?.length) {
  throw new NotFoundException(
    "Some of the requested tags were not found. Please check your tag IDs."
  );
}
```

## üéØ **–®–ê–ì 8: –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –í–´–í–û–î–´**

### **–ü—Ä–∏–Ω—Ü–∏–ø—ã, –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–æ–º:**

1. **"–ó–∞—â–∏—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"** - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏
2. **"–Ø–≤–Ω–æ–µ –ª—É—á—à–µ –Ω–µ—è–≤–Ω–æ–≥–æ"** - –ª—É—á—à–µ –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —á–µ–º –º–æ–ª—á–∞ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É
3. **"–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏"** - —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ ‚Üí —Ä–∞–∑–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
4. **"–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—ã—à–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π"** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤–∞–∂–Ω–µ–µ —É–¥–æ–±—Å—Ç–≤–∞

### **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**

- ‚úÖ **–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î** –∑–∞—â–∏—â–µ–Ω—ã try-catch
- ‚úÖ **–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞** –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —è–≤–Ω–æ
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã
- ‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ—à–∏–±–æ–∫

## üîÆ **–®–ê–ì 9: –ß–¢–û –î–ê–õ–¨–®–ï**

### **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è production:**

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
2. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
3. **Retry –ª–æ–≥–∏–∫–∞** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤ –ë–î
4. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–æ–∫

–≠—Ç–æ—Ç —É—Ä–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Ö—Ä—É–ø–∫–∏–π –º–µ—Ç–æ–¥ –≤ –Ω–∞–¥–µ–∂–Ω—ã–π production-ready –∫–æ–¥! üöÄ
