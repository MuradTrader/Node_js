## üéØ **–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ DTO**

### ‚ùå **–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

```typescript
// –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞!
public createManyUsers(@Body() createUsersDto: CreateUserDto[]) {
    // TypeScript –¥–∞–µ—Ç type safety, –Ω–æ –Ω–µ—Ç runtime –≤–∞–ª–∏–¥–∞—Ü–∏–∏
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

- TypeScript –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ù–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ `class-validator` –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –º–∞—Å—Å–∏–≤–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –±–∞–∑—É

### üß™ **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã:**

```http
POST http://localhost:3000/users/create-many
Content-Type: application/json

[
  {
    "firstName": "John",
    "lastName": "Doe",
    "password": "Password123#"
    // ‚ùå –û–¢–°–£–¢–°–¢–í–£–ï–¢ email - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ!
  }
]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 201 Created (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 400!)

## üîß **–†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ CreateManyUsersDto**

### üèóÔ∏è **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DTO:**

```typescript
// –ë–´–õ–û (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):
CreateUserDto[]

// –°–¢–ê–õ–û (—Ä–∞–±–æ—Ç–∞–µ—Ç):
{
  "users": CreateUserDto[]
}
```

### üìù **–ö–æ–¥ –Ω–æ–≤–æ–≥–æ DTO:**

#### `src/users/dtos/create-many-users.dto.ts`

```typescript
import { ApiProperty } from "@nestjs/swagger";
import { Type } from "class-transformer";
import { IsArray, IsNotEmpty, ValidateNested } from "class-validator";
import { CreateUserDto } from "./create-user.dto";

export class CreateManyUsersDto {
  @ApiProperty({
    description: "Array of users to create",
    type: [CreateUserDto], // ‚úÖ –í–∞–∂–Ω–æ –¥–ª—è Swagger
    required: true,
  })
  @IsArray() // ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –º–∞—Å—Å–∏–≤
  @IsNotEmpty() // ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π
  @ValidateNested({ each: true }) // ‚úÖ –í–ê–ñ–ù–û: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  @Type(() => CreateUserDto) // ‚úÖ –í–ê–ñ–ù–û: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  users: CreateUserDto[];
}
```

## üîç **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤**

### 1. **`@IsArray()`**

```typescript
@IsArray()
users: CreateUserDto[];
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `users` - —ç—Ç–æ –º–∞—Å—Å–∏–≤, –∞ –Ω–µ –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞.

### 2. **`@IsNotEmpty()`**

```typescript
@IsNotEmpty()
users: CreateUserDto[];
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]`

### 3. **`@ValidateNested({ each: true })`** - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ô

```typescript
@ValidateNested({ each: true })
users: CreateUserDto[];
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- `ValidateNested` - –≤–∫–ª—é—á–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- `{ each: true }` - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫ –ö–ê–ñ–î–û–ú–£ —ç–ª–µ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤–∞

**–ë–µ–∑ —ç—Ç–æ–≥–æ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞!

### 4. **`@Type(() => CreateUserDto)`** - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ô

```typescript
@Type(() => CreateUserDto)
users: CreateUserDto[];
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- `class-transformer` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç plain JavaScript –æ–±—ä–µ–∫—Ç—ã –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤
- –ë–µ–∑ —ç—Ç–æ–≥–æ `class-validator` –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–∑ `CreateUserDto`

## üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–ª–æ–µ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

### 1. **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**

```typescript
// –ë–´–õ–û:
@Post('create-many')
public createManyUsers(@Body() createUsersDto: CreateUserDto[]) {
    return this.usersService.createMany(createUsersDto);
}

// –°–¢–ê–õ–û:
@Post('create-many')
public createManyUsers(@Body() createManyUsersDto: CreateManyUsersDto) {
    return this.usersService.createMany(createManyUsersDto);
}
```

### 2. **–°–µ—Ä–≤–∏—Å:**

```typescript
// –ë–´–õ–û:
public async createMany(createUsersDto: CreateUserDto[]) {
    return await this.usersCreateManyProvider.createMany(createUsersDto);
}

// –°–¢–ê–õ–û:
public async createMany(createManyUsersDto: CreateManyUsersDto) {
    return await this.usersCreateManyProvider.createMany(createManyUsersDto);
}
```

### 3. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä (—Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –ø—Ä–∞–≤–∫–∞):**

```typescript
// –ë–´–õ–û:
public async createMany(createUsersDto: CreateUserDto[]) {
    for (const user of createUsersDto) {
        // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –Ω–∞–ø—Ä—è–º—É—é
    }
}

// –°–¢–ê–õ–û:
public async createMany(createManyUsersDto: CreateManyUsersDto) {
    for (const user of createManyUsersDto.users) { // ‚úÖ .users!
        // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–æ users –∏–∑ DTO
    }
}
```

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö**

### **–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞):**

```json
[
  { "firstName": "John", "email": "john@test.com", ... },
  { "firstName": "Jane", "email": "jane@test.com", ... }
]
```

### **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç):**

```json
{
  "users": [
    { "firstName": "John", "email": "john@test.com", ... },
    { "firstName": "Jane", "email": "jane@test.com", ... }
  ]
}
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è**

### ‚ùå **–¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```http
POST http://localhost:3000/users/create-many
Content-Type: application/json

{
  "users": [
    {
      "firstName": "Mark",
      "lastName": "Doe",
      "password": "Password123#"
      // ‚ùå –ù–ï–¢ email - –¥–æ–ª–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
    }
  ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 400 Bad Request ‚úÖ

```json
{
  "statusCode": 400,
  "message": [
    "each value in users must be an instance of CreateUserDto",
    "users.0.email must be an email",
    "users.0.email should not be empty"
  ]
}
```

### ‚úÖ **–¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```http
POST http://localhost:3000/users/create-many
Content-Type: application/json

{
  "users": [
    {
      "firstName": "Mark",
      "lastName": "Doe",
      "email": "mark.doe@example.com",
      "password": "Password123#"
    },
    {
      "firstName": "Tom",
      "lastName": "Doe",
      "email": "tom.doe@example.com",
      "password": "Password123#"
    }
  ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 201 Created ‚úÖ + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã**

### ‚úÖ **–†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
2. **Type safety** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ TypeScript
3. **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
4. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### üîß **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

- `@ValidateNested({ each: true })` - –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞
- `@Type(() => CreateUserDto)` - –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å –º–∞—Å—Å–∏–≤–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç —Å —Å–≤–æ–π—Å—Ç–≤–æ–º `users`

–≠—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ NestJS! üöÄ
