## üèóÔ∏è **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É User –∏ Post**

### **–®–∞–≥ 1: –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ –≤ —Å—É—â–Ω–æ—Å—Ç–∏**

**–í `User.entity.ts` –¥–æ–±–∞–≤–ª—è–µ–º:**

```typescript
import { Post } from "./post.entity";

@Entity()
export class User {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (id, firstName, lastName, email, password)

  // –ù–û–í–û–ï: –æ—Ç–Ω–æ—à–µ–Ω–∏–µ One-to-Many –∫ Post
  posts: Post[]; // –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –ø–æ—Å—Ç–æ–≤
}
```

**–í `Post.entity.ts` –¥–æ–±–∞–≤–ª—è–µ–º:**

```typescript
import { User } from "./user.entity";

@Entity()
export class Post {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ (id, title, postType, slug, status, content, etc.)

  // –ù–û–í–û–ï: –æ—Ç–Ω–æ—à–µ–Ω–∏–µ Many-to-One –∫ User
  author: User; // –ö–∞–∂–¥—ã–π –ø–æ—Å—Ç –∏–º–µ–µ—Ç –æ–¥–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
}
```

## üîÑ **–î–æ–±–∞–≤–ª—è–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π**

### **–í Post.entity.ts (Many-to-One —Å—Ç–æ—Ä–æ–Ω–∞):**

```typescript
@ManyToOne(() => User, user => user.posts) // ‚Üê –î–µ–∫–æ—Ä–∞—Ç–æ—Ä ManyToOne
author: User;
```

**–†–∞–∑–±–æ—Ä –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `@ManyToOne`:**

- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç**: `() => User` - —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ü–µ–ª–µ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç**: `user => user.posts` - –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–æ –≤ User

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**

- "–≠—Ç–æ—Ç Post –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ–¥–Ω–æ–º—É User"
- "–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ User.posts"

### **–í User.entity.ts (One-to-Many —Å—Ç–æ—Ä–æ–Ω–∞):**

```typescript
@OneToMany(() => Post, post => post.author) // ‚Üê –î–µ–∫–æ—Ä–∞—Ç–æ—Ä OneToMany
posts: Post[];
```

**–†–∞–∑–±–æ—Ä –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `@OneToMany`:**

- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç**: `() => Post` - —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ü–µ–ª–µ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç**: `post => post.author` - –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–æ –≤ Post

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**

- "–≠—Ç–æ—Ç User –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ Post"
- "–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Post.author"

## üóÉÔ∏è **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Foreign Key:**

**TypeORM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `posts`:**

```sql
-- –°—Ç–æ–ª–±–µ—Ü authorId –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
ALTER TABLE posts ADD COLUMN "authorId" INTEGER;

-- –°–æ–∑–¥–∞–µ—Ç—Å—è foreign key constraint
ALTER TABLE posts
ADD CONSTRAINT "FK_author_id"
FOREIGN KEY ("authorId") REFERENCES users(id);
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ PgAdmin:**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `posts` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```
–°—Ç–æ–ª–±—Ü—ã —Ç–∞–±–ª–∏—Ü—ã posts:
- id (primary key)
- title
- slug
- status
- content
- ...
- metaOptionsId (–¥–ª—è —Å–≤—è–∑–∏ —Å meta_options)
- authorId ‚Üê –ù–û–í–´–ô –°–¢–û–õ–ë–ï–¶ (foreign key –∫ users.id)
```

## üîç **–ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–µ–Ω @JoinColumn**

### **–û—Ç–ª–∏—á–∏–µ –æ—Ç One-to-One –æ—Ç–Ω–æ—à–µ–Ω–∏–π:**

**–í One-to-One:**

```typescript
@OneToOne(() => MetaOption)
@JoinColumn() // ‚Üê –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –≥–¥–µ foreign key
metaOptions: MetaOption;
```

**–í Many-to-One:**

```typescript
@ManyToOne(() => User)
// @JoinColumn –ù–ï –Ω—É–∂–µ–Ω - foreign key —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
author: User;
```

**–ü—Ä–∏—á–∏–Ω–∞:** TypeORM –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö Many-to-One/One-to-Many foreign key –í–°–ï–ì–î–ê –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ "Many" (Post), –ø–æ—ç—Ç–æ–º—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π**

### **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**

```
User entity (–û–¥–∏–Ω)           Post entity (–ú–Ω–æ–≥–∏–µ)
+-------------+              +-------------+
| id          |              | id          |
| firstName   |<---(1)-------| title       |
| lastName    |              | content     |
| email       |---(N)------->| authorId    | ‚Üê FOREIGN KEY
| posts: Post[]|             | author: User|
+-------------+              +-------------+
```

**–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π:**

- **(1)**: –û–¥–∏–Ω User ‚Üí –ú–Ω–æ–≥–æ Post (One-to-Many)
- **(N)**: –ú–Ω–æ–≥–æ Post ‚Üí –û–¥–∏–Ω User (Many-to-One)

## ‚öôÔ∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### **–ò–º—è foreign key —Å—Ç–æ–ª–±—Ü–∞:**

**TypeORM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º—è –ø–æ —à–∞–±–ª–æ–Ω—É:**

- **–ò–º—è —Å–≤–æ–π—Å—Ç–≤–∞** + **Id** = `authorId`
- –ú–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–Ω–æ —É–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ `@JoinColumn` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –Ω–æ –æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ):**

```typescript
// –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
@OneToMany(() => Post, post => post.author, {
    cascade: true // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
})
posts: Post[];
```

## üîÑ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏**

### **One-to-One (Post ‚Üî MetaOption):**

```typescript
// –¢—Ä–µ–±–æ–≤–∞–ª —è–≤–Ω–æ–≥–æ @JoinColumn
// Foreign key –º–æ–≥ –±—ã—Ç—å –≤ –ª—é–±–æ–π —Ç–∞–±–ª–∏—Ü–µ
// –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—ã–±–∏—Ä–∞—Ç—å –≥–¥–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å foreign key
```

### **One-to-Many/Many-to-One (User ‚Üî Post):**

```typescript
// @JoinColumn –ù–ï –Ω—É–∂–µ–Ω
// Foreign key –í–°–ï–ì–î–ê –≤ —Ç–∞–±–ª–∏—Ü–µ "Many" (posts)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è foreign key
```

## üöÄ **–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ**

### **–ë—É–¥—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ —Å –∞–≤—Ç–æ—Ä–∞–º–∏:**

```typescript
// –ú–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç –∏ —Å—Ä–∞–∑—É –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∞–≤—Ç–æ—Ä–∞
const post = new Post();
post.title = "My Post";
post.author = user; // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

2. **–ó–∞–ø—Ä–æ—Å—ã —Å –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏:**

```typescript
// –ù–∞–π—Ç–∏ –≤—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userWithPosts = await userRepository.findOne({
  where: { id: 1 },
  relations: ["posts"],
});

// –ù–∞–π—Ç–∏ –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞
const postWithAuthor = await postRepository.findOne({
  where: { id: 1 },
  relations: ["author"],
});
```

3. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
user.posts = [new Post(), new Post()];
await userRepository.save(user); // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ—Å—Ç—ã
```

## üí° **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

### **–í PgAdmin –∞–≤—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**

1. **–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `posts`**
2. **–í–∏–¥–∏—Ç –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü `authorId`**
3. **–£–±–µ–∂–¥–∞–µ—Ç—Å—è —á—Ç–æ foreign key —Å–æ–∑–¥–∞–Ω**

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –û—Ç–Ω–æ—à–µ–Ω–∏–µ –º–µ–∂–¥—É User –∏ Post —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ Foreign key `authorId` —Å–æ–∑–¥–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü–µ `posts`
- ‚úÖ –ë–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã**

1. **One-to-Many/Many-to-One** —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –ø–∞—Ä–æ–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
2. **@ManyToOne** –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ "Many" (Post)
3. **@OneToMany** –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ "One" (User)
4. **Foreign key —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤ —Ç–∞–±–ª–∏—Ü–µ "Many"
5. **@JoinColumn –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** - TypeORM —Å–∞–º –∑–Ω–∞–µ—Ç –≥–¥–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å foreign key
6. **–û–±—Ä–∞—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏** —Å–≤—è–∑—ã–≤–∞—é—Ç –¥–≤–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –≤–º–µ—Å—Ç–µ

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –±–ª–æ–≥–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö –ø–æ—Å—Ç–∞–º–∏! üöÄ
