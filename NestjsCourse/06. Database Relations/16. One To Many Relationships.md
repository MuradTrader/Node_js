## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π One-to-Many –∏ Many-to-One**

### **–ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**

**User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) ‚Üî Post (–ü–æ—Å—Ç) –æ—Ç–Ω–æ—à–µ–Ω–∏—è:**

- **–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –º–æ–∂–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å **–º–Ω–æ–≥–æ –ø–æ—Å—Ç–æ–≤**
- **–ö–∞–∂–¥—ã–π –ø–æ—Å—Ç** –∏–º–µ–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

### **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**

```
User entity (–û–¥–∏–Ω)          Post entity (–ú–Ω–æ–≥–∏–µ)
+-------------+             +-------------+
| id          |             | id          |
| firstName   |‚Üê--- –°–í–Ø–ó–¨ ---| title       |
| lastName    |             | content     |
| email       |             | userId      | ‚Üê FOREIGN KEY
+-------------+             +-------------+
```

## üîÑ **–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–∏—Ä–æ–¥–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π**

### **–ü–æ—á–µ–º—É —ç—Ç–æ –≤—Å–µ–≥–¥–∞ bidirectional relationship:**

**–°–æ —Å—Ç–æ—Ä–æ–Ω—ã User (One-to-Many):**

```typescript
// User –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ Post
@OneToMany(() => Post, post => post.author)
posts: Post[];
```

**–°–æ —Å—Ç–æ—Ä–æ–Ω—ã Post (Many-to-One):**

```typescript
// Post –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ–¥–Ω–æ–º—É User
@ManyToOne(() => User, user => user.posts)
author: User;
```

### **–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:**

**–ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã:**

```typescript
// –û—Ç User –∫ –µ–≥–æ Post
const user = await userRepository.findOne({ relations: ["posts"] });
console.log(user.posts); // –í—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

// –û—Ç Post –∫ –µ–≥–æ –∞–≤—Ç–æ—Ä—É User
const post = await postRepository.findOne({ relations: ["author"] });
console.log(post.author); // –ê–≤—Ç–æ—Ä –ø–æ—Å—Ç–∞
```

## üóÉÔ∏è **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ Foreign Key - –∫–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ**

### **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á:**

**–ü—Ä–∞–≤–∏–ª–æ:**

> "Foreign key –í–°–ï–ì–î–ê –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ 'Many' (Many-to-One)"

**–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ:**

- **Post entity** –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ `@ManyToOne` –∫ User
- **Foreign key –±—É–¥–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `posts`** –∫–∞–∫ `userId`

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**

**users —Ç–∞–±–ª–∏—Ü–∞:**

```sql
id | firstName | lastName | email
1  | John      | Doe      | john@example.com
```

**posts —Ç–∞–±–ª–∏—Ü–∞:**

```sql
id | title      | content    | userId  ‚Üê FOREIGN KEY (—Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ users.id)
1  | "My Post"  | "Content"  | 1
2  | "Post 2"   | "Content"  | 1
```

## ‚öôÔ∏è **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤**

### **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ @JoinColumn:**

**–ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–µ–Ω `@JoinColumn`:**

- –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö Many-to-One/One-to-Many TypeORM **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —Å–æ–∑–¥–∞–µ—Ç foreign key
- –ò–º—è —Å—Ç–æ–ª–±—Ü–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `userId` (–∏–º—è–°—É—â–Ω–æ—Å—Ç–∏ + Id)
- `@JoinColumn` –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è One-to-One –æ—Ç–Ω–æ—à–µ–Ω–∏–π

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**

**–ë–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è `@JoinColumn` TypeORM —Å–æ–∑–¥–∞—Å—Ç:**

```sql
-- –í —Ç–∞–±–ª–∏—Ü–µ posts –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è:
ALTER TABLE posts ADD COLUMN userId INTEGER REFERENCES users(id);
```

## üîÑ **–£–Ω–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ vs –ë–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è**

### **Many-to-One –º–æ–∂–µ—Ç –±—ã—Ç—å —É–Ω–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º:**

```typescript
// –¢–û–õ–¨–ö–û Post –∑–Ω–∞–µ—Ç –æ User, –Ω–æ User –Ω–µ –∑–Ω–∞–µ—Ç –æ Post
@Entity()
export class Post {
  @ManyToOne(() => User) // –ë–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Å—ã–ª–∫–∏
  author: User;
}

@Entity()
export class User {
  // –ù–ï–¢ —Å—Å—ã–ª–∫–∏ –Ω–∞ Post - —É–Ω–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ
}
```

### **–ù–æ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**

```typescript
// –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ
@Entity()
export class User {
  @OneToMany(() => Post, (post) => post.author)
  posts: Post[];
}

@Entity()
export class Post {
  @ManyToOne(() => User, (user) => user.posts)
  author: User;
}
```

## üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π**

### **1. –£–¥–æ–±—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤:**

```typescript
// –ù–∞–π—Ç–∏ –≤—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userWithPosts = await userRepository.findOne({
  where: { id: 1 },
  relations: ["posts"], // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã
});

// –ù–∞–π—Ç–∏ –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞
const postWithAuthor = await postRepository.findOne({
  where: { id: 1 },
  relations: ["author"], // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–≤—Ç–æ—Ä–∞
});
```

### **2. –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**

```typescript
// –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ
@OneToMany(() => Post, post => post.author, {
    cascade: true // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å—Ç—ã –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
})
posts: Post[];
```

### **3. –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:**

- Foreign key constraint –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ—Å—Ç –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–≤—Ç–æ—Ä–∞
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç One-to-One –æ—Ç–Ω–æ—à–µ–Ω–∏–π**

| –ê—Å–ø–µ–∫—Ç                     | One-to-One                          | One-to-Many / Many-to-One |
| -------------------------- | ----------------------------------- | ------------------------- |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–µ–π**      | –û–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É                       | –û–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º            |
| **Foreign key**            | –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ª—é–±–æ–π —Ç–∞–±–ª–∏—Ü–µ          | –í—Å–µ–≥–¥–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ "Many"   |
| **@JoinColumn**            | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å foreign key | –ù–µ –Ω—É–∂–µ–Ω (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π) |
| **–¢–∏–ø–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ü–æ—Å—Ç ‚Üî –ú–µ—Ç–∞-–æ–ø—Ü–∏–∏                   | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üî –ü–æ—Å—Ç—ã      |

## üöÄ **–ß—Ç–æ –∂–¥–µ—Ç –≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–í —Å–ª–µ–¥—É—é—â–∏—Ö –≤–∏–¥–µ–æ –∞–≤—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç:**

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π** –≤ User –∏ Post entity
2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è foreign key
3. **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤** —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏

## üíé **–ò—Ç–æ–≥–æ–≤—ã–µ –≤—ã–≤–æ–¥—ã**

1. **One-to-Many/Many-to-One** - —ç—Ç–æ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ–¥–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
2. **Foreign key –í–°–ï–ì–î–ê** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ "Many" (–≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ—Å—Ç–æ–≤)
3. **@JoinColumn –Ω–µ –Ω—É–∂–µ–Ω** - TypeORM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç foreign key –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–ë–∏–¥–∏—Ä–µ–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è** –¥–∞—é—Ç –≥–∏–±–∫–æ—Å—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
5. **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö –ø–æ—Å—Ç—ã –≤ –±–ª–æ–≥–µ

–≠—Ç–∞ —Ç–µ–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö! üéØ
