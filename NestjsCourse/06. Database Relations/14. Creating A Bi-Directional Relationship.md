## üîÑ **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Unidirectional ‚Üí Bidirectional Relationship**

### **–®–∞–≥ 1: –î–æ–±–∞–≤–ª—è–µ–º —Å–≤—è–∑—å –≤ MetaOption entity**

**–ë—ã–ª–æ (—Ç–æ–ª—å–∫–æ –≤ Post.entity.ts):**

```typescript
// –¢–æ–ª—å–∫–æ Post –∑–Ω–∞–ª –æ MetaOption
@OneToOne(() => MetaOption, { cascade: true, eager: true })
@JoinColumn()
metaOptions?: MetaOption;
```

**–°—Ç–∞–ª–æ (–¥–æ–±–∞–≤–ª—è–µ–º –≤ MetaOption.entity.ts):**

```typescript
import { Post } from "./post.entity"; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Post entity

@Entity()
export class MetaOption {
  @PrimaryGeneratedColumn()
  id: number;

  @Column({ type: "json", nullable: false })
  metaValue: string;

  // –ù–û–í–ê–Ø –°–í–Ø–ó–¨: MetaOption —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç –æ Post
  @OneToOne(() => Post, (post) => post.metaOptions) // ‚Üê –í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç - –æ–±—Ä–∞—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞
  post: Post; // –ö–∞–∂–¥–∞—è MetaOption —Å–≤—è–∑–∞–Ω–∞ —Å –æ–¥–Ω–∏–º Post
}
```

### **–®–∞–≥ 2: –û–±–Ω–æ–≤–ª—è–µ–º —Å–≤—è–∑—å –≤ Post entity**

**–û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–≤—è–∑—å:**

```typescript
// –ë–´–õ–û:
@OneToOne(() => MetaOption, { cascade: true, eager: true })
@JoinColumn()
metaOptions?: MetaOption;

// –°–¢–ê–õ–û:
@OneToOne(() => MetaOption, metaOption => metaOption.post, {
    cascade: true,
    eager: true
})
@JoinColumn()
metaOptions?: MetaOption;
```

**–ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏–ª–∏ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `metaOption => metaOption.post`

## üéØ **–ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–≤—è–∑–µ–π:**

**Post ‚Üí MetaOption:**

```typescript
// Post –≥–æ–≤–æ—Ä–∏—Ç: "–Ø —Å–≤—è–∑–∞–Ω —Å MetaOption —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ metaOptions"
@OneToOne(() => MetaOption, metaOption => metaOption.post)
metaOptions?: MetaOption;
```

**MetaOption ‚Üí Post:**

```typescript
// MetaOption –≥–æ–≤–æ—Ä–∏—Ç: "–Ø —Å–≤—è–∑–∞–Ω —Å Post —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ post"
@OneToOne(() => Post, post => post.metaOptions)
post: Post;
```

### **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**

```
Post entity:                    MetaOption entity:
+-------------+                +-----------------+
| id          |                | id              |
| title       |                | metaValue       |
| metaOptions | ‚Üê--- –°–í–Ø–ó–¨ ---‚Üí| post            |
+-------------+                +-----------------+
```

## üîç **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è bidirectional relationship**

### **–ö–æ–¥ –≤ PostsService.delete():**

```typescript
public async delete(id: number) {
    // –®–∞–≥ 1: –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å—Ç –æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
    let post = await this.postsRepository.findOneBy({ id });

    // –®–∞–≥ 2: –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø - –Ω–∞—Ö–æ–¥–∏–º —Ç–æ—Ç –∂–µ –ø–æ—Å—Ç —á–µ—Ä–µ–∑ MetaOption repository!
    let inversePost = await this.metaOptionsRepository.find({
        where: {
            id: post.metaOptions.id // –ò—â–µ–º MetaOption –ø–æ ID
        },
        relations: ['post'] // ‚Üê –ö–õ–Æ–ß–ï–í–û–ô –ú–û–ú–ï–ù–¢: –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–π Post
    });

    console.log(inversePost); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

    // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω–∏—è...
}
```

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –∫–æ–¥–µ:**

1. **–°–Ω–∞—á–∞–ª–∞** –Ω–∞—Ö–æ–¥–∏–º Post —á–µ—Ä–µ–∑ `postsRepository`
2. **–ó–∞—Ç–µ–º** –∏—Å–ø–æ–ª—å–∑—É–µ–º `metaOptionsRepository` —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç–æ—Ç –∂–µ Post —á–µ—Ä–µ–∑ —Å–≤—è–∑–∞–Ω–Ω—É—é MetaOption
3. **`relations: ['post']`** - –≥–æ–≤–æ—Ä–∏—Ç TypeORM –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å Post

## üß™ **–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ –∫–æ–Ω—Å–æ–ª–∏):**

```javascript
// inversePost –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
[
  {
    id: 3,                    // ID meta option
    metaValue: "{...}",       // JSON –¥–∞–Ω–Ω—ã–µ
    post: {                   // ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ó–ê–ì–†–£–ñ–ï–ù–ù–´–ô POST!
      id: 3,                  // –¢–æ—Ç –∂–µ ID —á—Ç–æ –∏ –≤ –Ω–∞—á–∞–ª–µ
      title: "My Post",
      metaOptions: { ... }    // –ò —Å–Ω–æ–≤–∞ metaOptions (–∏–∑-–∑–∞ eager)
    }
  }
]
```

## ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞ —Å Eager Loading**

**–ê–≤—Ç–æ—Ä –æ–±—Ä–∞—â–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –≤–∞–∂–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É:**

```typescript
// –í Post.entity.ts:
@OneToOne(() => MetaOption, metaOption => metaOption.post, {
    cascade: true,
    eager: true  // ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –í–°–ï–ì–î–ê
})
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

- Post –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç MetaOption (eager: true)
- MetaOption –∑–∞–≥—Ä—É–∂–∞–µ—Ç Post (—á–µ—Ä–µ–∑ relations)
- Post —Å–Ω–æ–≤–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç MetaOption (eager: true)
- **–í–æ–∑–º–æ–∂–Ω–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è!**

**–†–µ—à–µ–Ω–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–æ–∑–∂–µ):**

```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å lazy loading –∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ relations
@OneToOne(() => MetaOption, metaOption => metaOption.post, {
    cascade: true,
    // eager: false - —É–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É
})
```

## üóÉÔ∏è **–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –û–°–¢–ê–õ–ê–°–¨ –ø—Ä–µ–∂–Ω–µ–π:**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ posts (foreign key –∑–¥–µ—Å—å)
id | title      | metaOptionsId
3  | "My Post"  | 3

-- –¢–∞–±–ª–∏—Ü–∞ meta_option
id | metaValue
3  | '{"sidebar": true}'
```

**–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç:** `@JoinColumn` –æ—Å—Ç–∞–ª—Å—è –≤ Post entity ‚Üí foreign key –æ—Å—Ç–∞–ª—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ posts

## üîÑ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç bidirectional navigation**

### **–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –æ–±–∞ –ø—É—Ç–∏:**

**–ü—É—Ç—å 1: Post ‚Üí MetaOption (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ)**

```typescript
const post = await postsRepository.findOne({ where: { id: 1 } });
console.log(post.metaOptions); // MetaOption –¥–∞–Ω–Ω—ã–µ
```

**–ü—É—Ç—å 2: MetaOption ‚Üí Post (–ù–û–í–ê–Ø –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å)**

```typescript
const metaOption = await metaOptionsRepository.findOne({
  where: { id: 1 },
  relations: ["post"], // –Ø–≤–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–π Post
});
console.log(metaOption.post); // Post –¥–∞–Ω–Ω—ã–µ
```

## üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–ª—å–∑–∞ bidirectional relationship**

### **1. –ì–∏–±–∫–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤:**

```typescript
// –ú–æ–∂–µ–º –∏—Å–∫–∞—Ç—å –ø–æ—Å—Ç—ã —á–µ—Ä–µ–∑ –º–µ—Ç–∞-–æ–ø—Ü–∏–∏
const postsWithSidebar = await metaOptionsRepository.find({
  where: {
    metaValue: Like("%sidebarEnabled%"),
  },
  relations: ["post"],
});
```

### **2. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞:**

```typescript
// –í–º–µ—Å—Ç–æ –¥–≤—É—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω
// –°–µ–π—á–∞—Å –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±–∞, –Ω–æ –≤ –±—É–¥—É—â–µ–º —Å–º–æ–∂–µ–º —É–±—Ä–∞—Ç—å metaOptionsRepository
```

### **3. –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**

```typescript
// –í –±—É–¥—É—â–µ–º: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
// –ü–æ–∫–∞ –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —ç—Ç–æ–º –∫–æ–¥–µ
```

## üö® **–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

**–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –µ—â–µ –ù–ï–¢:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- –£–±—Ä–∞–Ω –∏–Ω–∂–µ–∫—Ç MetaOption repository –∏–∑ PostsService
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω eager loading

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã**

1. **Bidirectional relationship** —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ –æ–±–µ —Å—É—â–Ω–æ—Å—Ç–∏
2. **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ `@OneToOne`** —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–æ –≤ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
3. **`relations: ['post']`** –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
4. **Eager loading –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã** —Å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
5. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è** - –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–± –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

–≠—Ç–æ—Ç —É—Ä–æ–∫ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤—É –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π, –≥–¥–µ –º—ã —É–≤–∏–¥–∏–º –Ω–∞—Å—Ç–æ—è—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ bidirectional relationships! üöÄ
