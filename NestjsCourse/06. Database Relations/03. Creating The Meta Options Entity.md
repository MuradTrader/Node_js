### –û–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–ê–≤—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å MetaOption –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PostgreSQL –ø–æ —Ä–∞–±–æ—Ç–µ —Å JSON. –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≥–∏–±–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º:

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è MetaOptions

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NestJS CLI:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è
nest generate module meta-options

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (—É–¥–∞–ª–µ–Ω spec —Ñ–∞–π–ª)
nest generate controller meta-options
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –°–æ–∑–¥–∞–Ω `meta-options.module.ts`
- –°–æ–∑–¥–∞–Ω `meta-options.controller.ts`
- –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `AppModule`

---

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ MetaOption

**–§–∞–π–ª: `meta-option.entity.ts`** (singular)
**–ö–ª–∞—Å—Å: `MetaOption`**

**–ë–∞–∑–æ–≤—ã–π –∫–∞—Ä–∫–∞—Å:**

```typescript
import {
  Entity,
  Column,
  PrimaryGeneratedColumn,
  CreateDateColumn,
  UpdateDateColumn,
} from "typeorm";

@Entity()
export class MetaOption {
  // —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
}
```

---

#### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö

**–ë—ã–ª–æ (–≤ DTO):**

```typescript
// CreatePostMetaOptionsDto
export class CreatePostMetaOptionsDto {
  @IsNotEmpty()
  key: string;

  @IsNotEmpty()
  value: any;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Post Entity
metaOptions?: CreatePostMetaOptionsDto[];  // –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
```

**–°—Ç–∞–ª–æ (–≤ MetaOption Entity):**

```typescript
// MetaOption Entity
export class MetaOption {
  @Column({ type: "json", nullable: false })
  metaValue: string; // –æ–¥–∏–Ω JSON –æ–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ –∫–ª—é—á–∞–º–∏
}
```

**–ü—Ä–∏–º–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**

**–î–æ (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤):**

```typescript
[
  { key: "sidebar_enabled", value: true },
  { key: "comments_allowed", value: false },
  { key: "theme", value: "dark" },
];
```

**–ü–æ—Å–ª–µ (–µ–¥–∏–Ω—ã–π JSON –æ–±—ä–µ–∫—Ç):**

```typescript
{
  "sidebar_enabled": true,
  "comments_allowed": false,
  "theme": "dark"
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**

- –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
- –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

#### 4. –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —Å—É—â–Ω–æ—Å—Ç–∏

**A. ID (–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á)**

```typescript
@PrimaryGeneratedColumn()
id: number;
```

**B. MetaValue (JSON –¥–∞–Ω–Ω—ã–µ)**

```typescript
@Column({
  type: 'json',
  nullable: false
})
metaValue: string;
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É –°–£–ë–î:**

**PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫—É—Ä—Å–µ):**

- **–¢–∏–ø:** `json` –∏–ª–∏ `jsonb`
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:** –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–ø—Ä–æ—Å—ã –ø–æ JSON –ø–æ–ª—è–º
- **–ü—Ä–∏–º–µ—Ä SQL:** `SELECT * FROM meta_option WHERE meta_value->>'sidebar_enabled' = 'true'`

**MySQL (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞):**

- **–¢–∏–ø:** `text` –∏–ª–∏ `json`
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- **–ü—Ä–∏–º–µ—Ä:** `JSON.stringify(metaValue)` –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

**C. CreateDate (–¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è)**

```typescript
@CreateDateColumn()
createDate: Date;
```

**D. UpdateDate (–¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)**

```typescript
@UpdateDateColumn()
updateDate: Date;
```

---

#### 5. –ü–æ–ª–Ω—ã–π –∫–æ–¥ —Å—É—â–Ω–æ—Å—Ç–∏ MetaOption

```typescript
import {
  Entity,
  Column,
  PrimaryGeneratedColumn,
  CreateDateColumn,
  UpdateDateColumn,
} from "typeorm";

@Entity()
export class MetaOption {
  @PrimaryGeneratedColumn()
  id: number;

  @Column({
    type: "json",
    nullable: false,
  })
  metaValue: string;

  @CreateDateColumn()
  createDate: Date;

  @UpdateDateColumn()
  updateDate: Date;
}
```

---

#### 6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å JSON –ø–æ–ª–µ–º

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**

```typescript
const metaOption = new MetaOption();
metaOption.metaValue = JSON.stringify({
  sidebar_enabled: true,
  comments_allowed: false,
  theme: "dark",
  reading_time: 5,
});
await metaOptionRepository.save(metaOption);
```

**–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**

```typescript
const metaOption = await metaOptionRepository.findOne(1);
const metaData = JSON.parse(metaOption.metaValue);
console.log(metaData.sidebar_enabled); // true
```

**–ó–∞–ø—Ä–æ—Å—ã –∫ JSON –ø–æ–ª—é (PostgreSQL):**

```typescript
// –ü–æ–∏—Å–∫ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –≤–Ω—É—Ç—Ä–∏ JSON
const results = await metaOptionRepository
  .createQueryBuilder("metaOption")
  .where("metaOption.metaValue->>'sidebar_enabled' = :value", { value: "true" })
  .getMany();
```

---

#### 7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–æ–¥—Ö–æ–¥–æ–º

**–ü–æ–¥—Ö–æ–¥ 1: –û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–π**

```
meta_options —Ç–∞–±–ª–∏—Ü–∞:
id | post_id | key            | value
1  | 1       | sidebar_enabled| true
2  | 1       | comments_allowed| false
3  | 1       | theme          | dark
```

**–ü–æ–¥—Ö–æ–¥ 2: JSON –ø–æ–ª–µ (–≤—ã–±—Ä–∞–Ω –∞–≤—Ç–æ—Ä–æ–º)**

```
meta_option —Ç–∞–±–ª–∏—Ü–∞:
id | meta_value                                      | create_date
1  | {"sidebar_enabled":true,"comments_allowed":false}| 2023-10-05
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ JSON –ø–æ–¥—Ö–æ–¥–∞:**

- –ú–µ–Ω—å—à–µ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ
- –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å (–æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ—Å—Ç)
- –ì–∏–±–∫–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ JSON –ø–æ–¥—Ö–æ–¥–∞:**

- –°–ª–æ–∂–Ω–µ–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–ª—é—á–∞–º
- –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –°–£–ë–î

---

#### 8. –ü–æ—á–µ–º—É –∞–≤—Ç–æ—Ä –≤—ã–±—Ä–∞–ª JSON –ø–æ–¥—Ö–æ–¥ –¥–ª—è MetaOption

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞:**

1. **–ú–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—á–∏–≤—ã** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è
2. **–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - –æ–±—ã—á–Ω–æ —á–∏—Ç–∞—é—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º
3. **PostgreSQL –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å JSON** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –º–µ–Ω—å—à–µ —Ç–∞–±–ª–∏—Ü –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π

**–î–ª—è –∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∏—Ç JSON –ø–æ–¥—Ö–æ–¥:**

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ú–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–î–ª—è –∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç:**

- –î–∞–Ω–Ω—ã–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ
- –î–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç—Ä–æ–≥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

#### 9. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º

**–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ:**

```
Post (1) ‚Üê‚Üí (1) MetaOption
```

**–û–¥–∏–Ω –ø–æ—Å—Ç –±—É–¥–µ—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –º–µ—Ç–∞-–æ–ø—Ü–∏–π:**

- –ü–æ—Å—Ç –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ –º–µ—Ç–∞-–æ–ø—Ü–∏–π
- –ú–µ—Ç–∞-–æ–ø—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –æ–¥–Ω–æ–º—É –ø–æ—Å—Ç—É
- –û—Ç–Ω–æ—à–µ–Ω–∏–µ One-to-One –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–∏–¥–µ–æ

---

### –ò—Ç–æ–≥ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

1. **‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å MetaOptions** —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
2. **‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—É—â–Ω–æ—Å—Ç—å MetaOption** —Å 4 —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
3. **‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–∏–ø –∫–æ–ª–æ–Ω–∫–∏ `json`** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–æ–¥—Ö–æ–¥ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é** —Å –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –µ–¥–∏–Ω—ã–π JSON

**–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

1. **JSON –≤–º–µ—Å—Ç–æ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PostgreSQL —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏** - —Ç–∏–ø `json`
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è** - –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è —Å –ø–æ—Å—Ç–æ–º
4. **–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è

**–ß—Ç–æ –±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º –≤–∏–¥–µ–æ:**
–ê–≤—Ç–æ—Ä —É–ø–æ–º–∏–Ω–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DTO:

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ `CreatePostMetaOptionsDto`
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–π –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç JSON
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Post Entity –¥–ª—è —Å–≤—è–∑–∏ —Å MetaOption

**–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å–∞–π—Ç:** –í—ã–±–æ—Ä –º–µ–∂–¥—É —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ JSON –ø–æ–ª–µ–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ. –î–ª—è —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Å–ª–æ–∂–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ - —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –î–ª—è –≥–∏–±–∫–∏—Ö, —á–∞—Å—Ç–æ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö - JSON.

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π! üîóüìä
