## üèóÔ∏è **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ç–µ–≥–æ–≤**

### **–®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ Nest CLI**

**–ö–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ—Ä–∞:**

```bash
npx nest generate service tags/providers/tags --flat --no-spec
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**

- `nest generate service` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
- `tags/providers/tags` - –ø—É—Ç—å: `src/tags/providers/tags.service.ts`
- `--flat` - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞
- `--no-spec` - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –°–æ–∑–¥–∞–Ω `tags.service.ts` –≤ `src/tags/providers/`
- –û–±–Ω–æ–≤–ª–µ–Ω `tags.module.ts` - —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ providers

## üîß **–®–∞–≥ 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è TagService**

### **–ö–æ–¥ —Å–µ—Ä–≤–∏—Å–∞:**

```typescript
import { Injectable } from "@nestjs/common";
import { InjectRepository } from "@nestjs/typeorm";
import { Repository } from "typeorm";
import { Tag } from "../tag.entity";
import { CreateTagDto } from "../dtos/create-tag.dto";

@Injectable()
export class TagsService {
  constructor(
    /**
     * –ò–Ω–∂–µ–∫—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Tag
     */
    @InjectRepository(Tag)
    private readonly tagsRepository: Repository<Tag>
  ) {}

  /**
   * –ú–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–µ–≥–∞
   */
  public async create(createTagDto: CreateTagDto): Promise<Tag> {
    // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä —Å—É—â–Ω–æ—Å—Ç–∏ Tag –∏–∑ DTO
    let tag = this.tagsRepository.create(createTagDto);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return await this.tagsRepository.save(tag);
  }
}
```

### **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**

**1. –ò–Ω–∂–µ–∫—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**

```typescript
@InjectRepository(Tag)
private readonly tagsRepository: Repository<Tag>
```

- **`@InjectRepository(Tag)`** - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è TypeORM —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **`Repository<Tag>`** - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É—â–Ω–æ—Å—Ç—å—é Tag

**2. –ú–µ—Ç–æ–¥ create:**

```typescript
let tag = this.tagsRepository.create(createTagDto);
```

- **`create()`** - —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä —Å—É—â–Ω–æ—Å—Ç–∏ Tag –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—è –≤ –ë–î
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `new Tag()` –Ω–æ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

**3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:**

```typescript
return await this.tagsRepository.save(tag);
```

- **`save()`** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é (—Å ID –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)

## üéØ **–®–∞–≥ 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è TagsController**

### **–ö–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:**

```typescript
import { Controller, Post, Body } from "@nestjs/common";
import { TagsService } from "./providers/tags.service";
import { CreateTagDto } from "./dtos/create-tag.dto";

@Controller("tags")
export class TagsController {
  constructor(
    /**
     * –ò–Ω–∂–µ–∫—Ü–∏—è TagsService
     */
    private readonly tagsService: TagsService
  ) {}

  @Post()
  public create(@Body() createTagDto: CreateTagDto) {
    return this.tagsService.create(createTagDto);
  }
}
```

### **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**

**1. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:**

```typescript
@Controller("tags") // –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: /tags
export class TagsController {
  @Post() // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ POST –∑–∞–ø—Ä–æ—Å–æ–≤
  public create(@Body() createTagDto: CreateTagDto) {
    // ...
  }
}
```

**2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞:**

```typescript
@Body() createTagDto: CreateTagDto
```

- **`@Body()`** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–µ–ª–∞ HTTP –∑–∞–ø—Ä–æ—Å–∞
- **`CreateTagDto`** - DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è Tags**

### **TagsModule –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

```typescript
import { Module } from "@nestjs/common";
import { TypeOrmModule } from "@nestjs/typeorm";
import { Tag } from "./tag.entity";
import { TagsController } from "./tags.controller";
import { TagsService } from "./providers/tags.service";

@Module({
  controllers: [TagsController],
  providers: [TagsService],
  imports: [TypeOrmModule.forFeature([Tag])], // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Tag
})
export class TagsModule {}
```

### **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤:**

**`TypeOrmModule.forFeature([Tag])`**:

- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Tag –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –î–µ–ª–∞–µ—Ç `Repository<Tag>` –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –∏–Ω–∂–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `@InjectRepository(Tag)`

## üîÑ **–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

```
HTTP POST /tags
    ‚Üì
TagsController.create()
    ‚Üì @Body() ‚Üí CreateTagDto (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    ‚Üì
TagsService.create(createTagDto)
    ‚Üì
tagsRepository.create(createTagDto) ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Tag
    ‚Üì
tagsRepository.save(tag) ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
    ‚Üì
–í–æ–∑–≤—Ä–∞—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ Tag –∫–ª–∏–µ–Ω—Ç—É
```

## üìä **DTO CreateTagDto (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)**

### **–í—Å–ø–æ–º–Ω–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É DTO:**

```typescript
export class CreateTagDto {
  @ApiProperty()
  @IsString()
  @MinLength(3)
  @IsNotEmpty()
  @MaxLength(256)
  name: string;

  @ApiProperty()
  @IsString()
  @IsNotEmpty()
  @Matches(/^[a-z0-9]+(?:-[a-z0-9]+)*$/)
  @MaxLength(512)
  slug: string;

  @ApiPropertyOptional()
  @IsOptional()
  @IsString()
  description: string;

  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

## üõ°Ô∏è **–ü—Ä–∏–Ω—Ü–∏–ø—ã –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞–≤—Ç–æ—Ä**

### **1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**

- **Controller** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Service** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- **Repository** - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### **2. Dependency Injection:**

```typescript
// –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
constructor(
    private readonly tagsService: TagsService,
    @InjectRepository(Tag) private readonly tagsRepository: Repository<Tag>
)
```

### **3. –¢–∏–ø–∏–∑–∞—Ü–∏—è:**

- –í—Å–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç —á–µ—Ç–∫–∏–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- DTO –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- TypeORM —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

## üéØ **–ß—Ç–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ**

### **–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è CRUD –æ–ø–µ—Ä–∞—Ü–∏—è:**

- ‚úÖ **–°–µ—Ä–≤–∏—Å** —Å –º–µ—Ç–æ–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–æ–≤
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** —Å API endpoint
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ DTO
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –ë–î** —á–µ—Ä–µ–∑ TypeORM
- ‚úÖ **DI** –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### **API endpoint –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**

```http
POST http://localhost:3000/tags
Content-Type: application/json

{
    "name": "JavaScript",
    "slug": "javascript",
    "description": "Programming language"
}
```

## üîú **–ß—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ**

### **–ü–ª–∞–Ω –∞–≤—Ç–æ—Ä–∞:**

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ endpoint
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–µ–≥–æ–≤** —á–µ—Ä–µ–∑ API
3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Many-to-Many** —Å–≤—è–∑–∏ –º–µ–∂–¥—É Post –∏ Tag
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∫ –ø–æ—Å—Ç–∞–º**

### **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ Many-to-Many:**

–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π —Å –ø–æ—Å—Ç–∞–º–∏ —á–µ—Ä–µ–∑ junction table.

## üí° **–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É—Ä–æ–∫–∏**

### **1. –ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
// Controller ‚Üí Service ‚Üí Repository
// –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤
```

### **2. NestJS best practices:**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

### **3. TypeORM integration:**

- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω–∂–µ–∫—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ create/save
- –†–∞–±–æ—Ç–∞ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–≥–∞–º–∏, –≥–æ—Ç–æ–≤—ã–π –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ—Å—Ç–æ–≤! üöÄ
