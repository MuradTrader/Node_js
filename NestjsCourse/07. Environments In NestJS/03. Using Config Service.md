## üìù **–ü–û–°–¢–†–û–ß–ù–´–ô –†–ê–ó–ë–û–† –¢–ï–ö–°–¢–ê –ê–í–¢–û–†–ê**

### **1. –í–≤–µ–¥–µ–Ω–∏–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfigModule**

> "So we had added this config module successfully inside our application. And now we are ready to use this config module to access environment variables."

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**

- ConfigModule —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `app.module.ts`
- –¢–µ–ø–µ—Ä—å –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –æ—Ç **–Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –∫ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**
- –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å: –Ω–∞—É—á–∏—Ç—å—Å—è –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ ConfigService

### **2. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ .env —Ñ–∞–π–ª–µ**

> "We had also created this dot env file. And we have this particular environment variable which is S3 underscore bucket that we want to use inside our application."

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**

```env
# .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
S3_BUCKET=your-s3-bucket-details
```

**–ß—Ç–æ —Ç–∞–∫–æ–µ S3_BUCKET:**

- –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Amazon S3 (–æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥—É—Ç credentials –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ S3
- –ê–≤—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ –∫–∞–∫ –ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å ConfigService

### **3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

> "So as an example let us assume that you want to use this inside your user service for some reason. So let's go to our users module."

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ UsersService:**

- –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä
- –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ S3 –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è:
  - –ó–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –•—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ë—ç–∫–∞–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### **4. –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û–ï –û–¢–õ–ò–ß–ò–ï: ConfigService vs process.env**

> "Now it turns out that you can use the process dot env notation in order to grab the environment variables. But whenever you're trying to access these environment variables within any of the modules, it is important that you use the config service, which is a service provided by Nestjs."

**–í–æ—Ç —á—Ç–æ –∞–≤—Ç–æ—Ä –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ—Ç:**

```typescript
// ‚ùå –°–ü–û–°–û–ë 1: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤ NestJS)
const bucket = process.env.S3_BUCKET;

// ‚úÖ –°–ü–û–°–û–ë 2: –ß–µ—Ä–µ–∑ ConfigService (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
const bucket = this.configService.get<string>("S3_BUCKET");
```

**–ü–æ—á–µ–º—É ConfigService –ª—É—á—à–µ - 5 –ø—Ä–∏—á–∏–Ω:**

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DI —Å–∏—Å—Ç–µ–º–æ–π NestJS**

   ```typescript
   // –õ–µ–≥–∫–æ –º–æ–∫–∞—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö
   const mockConfigService = { get: jest.fn() };
   ```

2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**

   ```typescript
   // –ß–µ—Ç–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
   const port = this.configService.get<number>("PORT");
   ```

3. **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**

   ```typescript
   // –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   const limit = this.configService.get<number>("LIMIT", 10);
   ```

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**

   ```typescript
   // –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   const secret = this.configService.getOrThrow<string>("JWT_SECRET");
   ```

5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
   ```typescript
   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .env.development, .env.production –∏ —Ç.–¥.
   ```

### **5. –ü–†–û–¶–ï–°–° –ò–ù–ñ–ï–ö–¢–ò–†–û–í–ê–ù–ò–Ø ConfigService**

> "Now just like any other service this can be injected inside our user service. So let's go to our constructor which is right here. And we can inject this config service over here."

**–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**–®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç**

```typescript
import { ConfigService } from "@nestjs/config";
```

**–®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**

```typescript
constructor(
  // –î—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏...
  private readonly configService: ConfigService
) {}
```

**–®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–∞—Ö**

```typescript
public someMethod() {
  const value = this.configService.get<string>('SOME_VAR');
}
```

### **6. –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –í –í–ê–®–ï–ú –ö–û–î–ï**

> "So let me show you how you can access any environment variable. So we have this find all method right here. And let's try to use our config service inside this find all method."

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ –≤–∞—à–µ–º UsersService:**

```typescript
public findAll(
  getUserParamDto: GetUsersParamDto,
  limt: number,  // üëà –ó–∞–º–µ—Ç–∫–∞: –æ–ø–µ—á–∞—Ç–∫–∞, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 'limit'
  page: number
) {
  // ‚úÖ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï
  const environment = this.configService.get<string>("S3_BUCKET");
  console.log(environment);

  return [/* ... */];
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏:**

1. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `findAll()` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. `ConfigService` —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è DI NestJS
3. –ú–µ—Ç–æ–¥ `get()` –∏—â–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é 'S3_BUCKET' –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö environment variables
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ `undefined`, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

### **7. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ê–ë–û–¢–´**

> "Now in order to access this find all method let's go to users module. And in that HTTP directory and we have users dot get endpoint. So let's click on that. Let's just send this request in order to trigger our method."

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**

**HTTP –∑–∞–ø—Ä–æ—Å:**

```http
### –§–∞–π–ª: src/users/http/users.get.endpoints.http
GET http://localhost:3000/users/
```

**–¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤:**

```
1. HTTP Request ‚Üí UsersController.getUsers()
2. ‚Üí UsersService.findAll()
3. ‚Üí configService.get("S3_BUCKET")
4. ‚Üí –ß—Ç–µ–Ω–∏–µ –∏–∑ .env —Ñ–∞–π–ª–∞
5. ‚Üí –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å: "your-s3-bucket-details"
6. ‚Üí –í–æ–∑–≤—Ä–∞—Ç HTTP Response
```

### **8. –¢–ò–ü–ò–ó–ê–¶–ò–Ø –ò –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï –¢–ò–ü–û–í**

> "Another information over here is that with this get method you can also typecast the final value that you're expecting. So in our case we are getting a string and we can typecast it over here like so."

**–ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç –∞–≤—Ç–æ—Ä:**

```typescript
// .env —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏:
DB_PORT = 5432; // typeof ‚Üí "string"
DB_SYNCHRONIZE = true; // typeof ‚Üí "string"
MAX_CONNECTIONS = 100; // typeof ‚Üí "string"
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–∏–ø–∏–∑–∞—Ü–∏—é:**

```typescript
// –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞
const port = this.configService.get<number>("DB_PORT"); // number
const sync = this.configService.get<boolean>("DB_SYNCHRONIZE"); // boolean
const max = this.configService.get<number>("MAX_CONNECTIONS"); // number
```

**–ß—Ç–æ –∞–≤—Ç–æ—Ä –æ–±–µ—â–∞–µ—Ç –≤ –±—É–¥—É—â–µ–º:**

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ (–±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–∑–∂–µ)
// –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤:
const port = parseInt(this.configService.get<string>("DB_PORT"));

// –ë—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é
```

### **9. –ö–û–ù–ö–†–ï–¢–ù–´–ï –ü–†–ò–ú–ï–†–´ –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–Ø –¢–ò–ü–û–í**

**–†—É—á–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (–ø–æ–∫–∞):**

```typescript
// –°—Ç—Ä–æ–∫–∞ ‚Üí –ß–∏—Å–ª–æ
const port = parseInt(this.configService.get<string>("DB_PORT"));

// –°—Ç—Ä–æ–∫–∞ ‚Üí –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
const isProduction =
  this.configService.get<string>("NODE_ENV") === "production";

// –°—Ç—Ä–æ–∫–∞ ‚Üí –ú–∞—Å—Å–∏–≤
const hosts = this.configService.get<string>("ALLOWED_HOSTS").split(",");
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (–±—É–¥–µ—Ç –ø–æ–∑–∂–µ):**

```typescript
// ConfigModule —Å–º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å —Ç–∏–ø—ã
// –ù–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```

## üéØ **–ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ò–ó –≠–¢–û–ì–û –£–†–û–ö–ê**

### **–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω—è—Ç—å –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å:**

1. **ConfigService - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±** —Ä–∞–±–æ—Ç—ã —Å environment variables –≤ NestJS
2. **–í—Å–µ–≥–¥–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–π—Ç–µ ConfigService** —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏** –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏: `.get<—Ç–∏–ø>('–ü–ï–†–ï–ú–ï–ù–ù–ê–Ø')`
4. **–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env - —Å—Ç—Ä–æ–∫–∏**, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã
5. **ConfigService –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å DI** - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º –∏ –º–æ–¥—É–ª—å–Ω—ã–º

### **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**

–£ –≤–∞—Å **—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** —Ç–æ, —á—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –∞–≤—Ç–æ—Ä:

```typescript
// –í –≤–∞—à–µ–º UsersService —É–∂–µ –µ—Å—Ç—å:
constructor(
  private readonly configService: ConfigService  // ‚úÖ –£–∂–µ –µ—Å—Ç—å!
) {}

public findAll() {
  const environment = this.configService.get<string>("S3_BUCKET"); // ‚úÖ –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!
  console.log(environment);
}
```

## üîÆ **–ß–¢–û –ë–£–î–ï–¢ –î–ê–õ–¨–®–ï**

–ê–≤—Ç–æ—Ä –Ω–∞–º–µ–∫–∞–µ—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ–º—ã:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤** (string ‚Üí number/boolean)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- **–†–∞–∑–Ω—ã–µ .env —Ñ–∞–π–ª—ã** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥ (development, production)
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**

–≠—Ç–æ—Ç —É—Ä–æ–∫ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≤ NestJS! üöÄ
