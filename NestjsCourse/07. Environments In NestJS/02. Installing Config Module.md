## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ConfigModule

### –ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
npm install @nestjs/config@3.2.2
```

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –≤–µ—Ä—Å–∏—è 3.2.2?**

- –ê–≤—Ç–æ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –≠—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –ò–∑–±–µ–≥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å breaking changes –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ConfigModule –≤ app.module.ts

### –í–∞—à —Ç–µ–∫—É—â–∏–π –∫–æ–¥ —É–∂–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:

```typescript
import { ConfigModule } from "@nestjs/config";

@Module({
  imports: [
    ConfigModule.forRoot({
      isGlobal: true,  // ‚úÖ –£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!
    }),
    // ...
  ],
})
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `isGlobal: true`?

- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: `ConfigService` –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: –ù–µ –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `ConfigModule` –≤ –∫–∞–∂–¥—ã–π feature module
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üìÅ –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:

```
project-root/
‚îú‚îÄ‚îÄ .env           ‚Üê –ù–æ–≤—ã–π —Ñ–∞–π–ª, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–≤—Ç–æ—Ä–æ–º
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
```

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env —Ñ–∞–π–ª–∞ (–ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ—Ä–∞):

```env
S3_BUCKET=your-s3-bucket-details
```

**–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –æ .env —Ñ–∞–π–ª–∞—Ö:**

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ .env —Ñ–∞–π–ª—ã

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ (–∫–∞–∫ –æ–±—ä—è—Å–Ω—è–µ—Ç –∞–≤—Ç–æ—Ä):

```typescript
// ‚ùå –ü–õ–û–•–û - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–µ
TypeOrmModule.forRootAsync({
  useFactory: () => ({
    username: "postgres",
    password: "Password123#", // –í–∏–¥–Ω–æ –≤ Git!
    // ...
  }),
});

// ‚úÖ –•–û–†–û–®–û - –¥–∞–Ω–Ω—ã–µ –≤ .env (–Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è)
```

```env
# .env (–≤ .gitignore)
DB_USERNAME=postgres
DB_PASSWORD=Password123#
```

## üéØ –ß—Ç–æ –∞–≤—Ç–æ—Ä —Å–¥–µ–ª–∞–ª –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ:

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

```bash
npm install @nestjs/config@3.2.2
```

### 2. **–ù–∞—Å—Ç—Ä–æ–∏–ª –≥–ª–æ–±–∞–ª—å–Ω—ã–π ConfigModule**

```typescript
ConfigModule.forRoot({
  isGlobal: true, // –î–µ–ª–∞–µ—Ç ConfigService –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤–µ–∑–¥–µ
});
```

### 3. **–°–æ–∑–¥–∞–ª —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

```typescript
// –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
.env  ‚Üê –§–∞–π–ª –¥–ª—è environment variables
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

### NestJS ConfigModule –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

- **dotenv** - –ø–∞—Ä—Å–∏—Ç .env —Ñ–∞–π–ª—ã
- **process.env** - —á–∏—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ environment variables
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: system env vars > .env file values

### –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:

```
1. ConfigModule –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞
2. –î–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö –≤ process.env
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ ConfigService
```

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

### –í–∞—à —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (–∫–∞–∫ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä):

```typescript
// –ë—ã–ª–æ (–≤ app.module.ts):
TypeOrmModule.forRootAsync({
  useFactory: () => ({
    type: "postgres",
    port: 5432,
    username: "postgres", // ‚ùå Hardcoded
    password: "Password123#", // ‚ùå Hardcoded
    host: "localhost",
    database: "nestjs-blog",
  }),
});

// –°—Ç–∞–Ω–µ—Ç (–≤ —Å–ª–µ–¥—É—é—â–∏—Ö —É—Ä–æ–∫–∞—Ö):
TypeOrmModule.forRootAsync({
  imports: [ConfigModule],
  inject: [ConfigService],
  useFactory: (configService: ConfigService) => ({
    type: "postgres",
    host: configService.get("DB_HOST"), // ‚úÖ –ò–∑ .env
    port: configService.get("DB_PORT"), // ‚úÖ –ò–∑ .env
    username: configService.get("DB_USERNAME"), // ‚úÖ –ò–∑ .env
    password: configService.get("DB_PASSWORD"), // ‚úÖ –ò–∑ .env
    database: configService.get("DB_NAME"), // ‚úÖ –ò–∑ .env
  }),
});
```

## üöÄ –ß—Ç–æ –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å

### 1. **isGlobal: true** - –∫–ª—é—á–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–î–µ–ª–∞–µ—Ç `ConfigService` –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤

### 2. **.env –≤ .gitignore**

```gitignore
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ .gitignore
.env
.env.local
.env.production
```

### 3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ .env —Ñ–∞–π–ª–∞**

```env
–ö–õ–Æ–ß=–ó–ù–ê–ß–ï–ù–ò–ï
DB_HOST=localhost
DB_PORT=5432
JWT_SECRET=super-secret-key
```

## üéØ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É

–ê–≤—Ç–æ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç. –í —Å–ª–µ–¥—É—é—â–µ–º –≤–∏–¥–µ–æ –æ–Ω –ø–æ–∫–∞–∂–µ—Ç:

- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ConfigService` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
- –ö–∞–∫ –∑–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env
- –í–æ–∑–º–æ–∂–Ω–æ, —Ä–∞–±–æ—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ .env —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

**–í–∞—à –∫–æ–¥ —É–∂–µ –≥–æ—Ç–æ–≤ –∫ —ç—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º!** –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å:

- ‚úÖ ConfigModule —Å `isGlobal: true`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfigService –≤ UsersService
- ‚úÖ TypeOrmModule.forRootAsync (–≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É)
