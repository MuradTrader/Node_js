## üéØ **–û–°–ù–û–í–ù–ê–Ø –¶–ï–õ–¨ –£–†–û–ö–ê**

–ê–≤—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ ConfigService** –¥–ª—è –∑–∞–º–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üìù **–®–ê–ì 1: –°–û–ó–î–ê–ù–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø –î–õ–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•**

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env.development**

**–£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:**

```env
# –£–î–ê–õ–ï–ù–û:
S3_BUCKET=from development
```

**–î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

```env
# –î–û–ë–ê–í–õ–ï–ù–û:
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=password
DATABASE_HOST=localhost
DATABASE_NAME=nestjs-blog
```

### **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –æ –ø–∞—Ä–æ–ª—è—Ö:**

**–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏:**

```env
# ‚ùå –ü–†–û–ë–õ–ï–ú–ê - —Å–∏–º–≤–æ–ª # —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
DATABASE_PASSWORD=Password123#

# ‚úÖ –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–≤—ã—á–∫–∏
DATABASE_PASSWORD="Password123#"
```

## üîß **–®–ê–ì 2: –û–ë–ù–û–í–õ–ï–ù–ò–ï APP.MODULE.TS**

### **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ö–∞—Ä–¥–∫–æ–¥):**

```typescript
TypeOrmModule.forRootAsync({
  useFactory: () => ({
    type: "postgres",
    port: 5432, // ‚ùå –•–∞—Ä–¥–∫–æ–¥
    username: "postgres", // ‚ùå –•–∞—Ä–¥–∫–æ–¥
    password: "Password123#", // ‚ùå –•–∞—Ä–¥–∫–æ–¥
    host: "localhost", // ‚ùå –•–∞—Ä–¥–∫–æ–¥
    database: "nestjs-blog", // ‚ùå –•–∞—Ä–¥–∫–æ–¥
    synchronize: true,
    autoLoadEntities: true,
  }),
});
```

### **–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Å ConfigService:**

**–®–∞–≥ 2.1: –ò–º–ø–æ—Ä—Ç –∏ –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ConfigService**

```typescript
TypeOrmModule.forRootAsync({
  imports: [ConfigModule], // ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º ConfigModule
  inject: [ConfigService], // ‚úÖ –ò–Ω–∂–µ–∫—Ç–∏—Ä—É–µ–º ConfigService
  useFactory: (configService: ConfigService) => ({
    // –¢–µ–ø–µ—Ä—å configService –¥–æ—Å—Ç—É–ø–µ–Ω –∑–¥–µ—Å—å
  }),
});
```

**–®–∞–≥ 2.2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfigService –≤ factory —Ñ—É–Ω–∫—Ü–∏–∏**

```typescript
useFactory: (configService: ConfigService) => ({
  type: "postgres",
  port: configService.get<number>('DATABASE_PORT'),
  username: configService.get<string>('DATABASE_USER'),
  password: configService.get<string>('DATABASE_PASSWORD'),
  host: configService.get<string>('DATABASE_HOST'),
  database: configService.get<string>('DATABASE_NAME'),
  synchronize: true,
  autoLoadEntities: true,
}),
```

## üîÑ **–®–ê–ì 3: –ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –¢–ò–ü–û–í**

### **–ü—Ä–æ–±–ª–µ–º–∞:**

```typescript
// –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env - —Å—Ç—Ä–æ–∫–∏
configService.get("DATABASE_PORT"); // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "5432" (string)
```

### **–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –í–∞—Ä–∏–∞–Ω—Ç 1: –Ø–≤–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è + –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
port: +configService.get<string>('DATABASE_PORT'),

// –í–∞—Ä–∏–∞–Ω—Ç 2: parseInt
port: parseInt(configService.get<string>('DATABASE_PORT')),

// –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–∏–ø–∏–∑–∞—Ü–∏—è –∫–∞–∫ number (–∞–≤—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–±)
port: configService.get<number>('DATABASE_PORT'),
```

**–ê–≤—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**

```typescript
port: +configService.get<string>('DATABASE_PORT'),
// –£–Ω–∞—Ä–Ω—ã–π –ø–ª—é—Å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ
```

## üéØ **–ü–û–õ–ù–´–ô –ö–û–î APP.MODULE.TS**

### **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```typescript
TypeOrmModule.forRootAsync({
  imports: [ConfigModule],
  inject: [ConfigService],
  useFactory: (configService: ConfigService) => ({
    type: "postgres",
    port: +configService.get<string>("DATABASE_PORT"),
    username: configService.get<string>("DATABASE_USER"),
    password: configService.get<string>("DATABASE_PASSWORD"),
    host: configService.get<string>("DATABASE_HOST"),
    database: configService.get<string>("DATABASE_NAME"),
    synchronize: true,
    autoLoadEntities: true,
  }),
});
```

## üîç **–¢–û–ù–ö–û–°–¢–ò –ò –ù–Æ–ê–ù–°–´**

### **1. –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å process.env**

**–ú–û–ñ–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö (–∫–∞–∫ app.module.ts)
- –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ConfigModule —Å–∞–º–æ–≥–æ —Å–µ–±—è

**–ù–ï–õ–¨–ó–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

- –í —Å–µ—Ä–≤–∏—Å–∞—Ö, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö
- –í –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```typescript
// ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û - –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–æ–¥—É–ª—è
const env = process.env.NODE_ENV;

// ‚úÖ –†–ê–ó–†–ï–®–ï–ù–û - –≤ factory —Ñ—É–Ω–∫—Ü–∏–∏ ConfigModule
envFilePath: env ? `.env.${env}` : '.env'

// ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û - –≤ UsersService
public findAll() {
  const dbHost = process.env.DATABASE_HOST; // –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
}
```

### **2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ TypeOrmModule.forRootAsync**

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ async –ø–æ–¥—Ö–æ–¥:**

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π, —á–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π forRoot()

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã async –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```typescript
TypeOrmModule.forRootAsync({
  imports: [
    /* –º–æ–¥—É–ª–∏ –¥–ª—è –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
  ],
  inject: [
    /* —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
  ],
  useFactory: (/* –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã */) => ({
    // –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  }),
});
```

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ê–ë–û–¢–´**

### **–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

   ```bash
   npm run start:dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**

   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - TypeORM –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

3. **–¢–µ—Å—Ç–æ–≤—ã–π HTTP –∑–∞–ø—Ä–æ—Å:**
   ```http
   GET http://localhost:3000/users/
   ```
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ

## üí° **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –≠–¢–û–ì–û –ü–û–î–•–û–î–ê**

### **1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

```typescript
// –ë—ã–ª–æ (–æ–ø–∞—Å–Ω–æ):
password: "Password123#", // –í–∏–¥–Ω–æ –≤ –∫–æ–¥–µ

// –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
password: configService.get<string>('DATABASE_PASSWORD'), // –í .env —Ñ–∞–π–ª–µ
```

### **2. –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥:**

```env
# .env.development
DATABASE_PASSWORD="dev_password"

# .env.test
DATABASE_PASSWORD="test_password"

# .env.production
DATABASE_PASSWORD="super_secure_prod_password"
```

### **3. –õ–µ–≥–∫–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**

- –ù–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å .env —Ñ–∞–π–ª—ã
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Docker –∏ –æ–±–ª–∞—á–Ω—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π

## üö® **–í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø**

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è**

```typescript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
// 1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ .env
// 2. –ß—Ç–æ ConfigModule –∑–∞–≥—Ä—É–∂–µ–Ω –¥–æ TypeOrmModule
// 3. –ß—Ç–æ NODE_ENV —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**

```typescript
// –î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
port: +configService.get<string>('DATABASE_PORT'),

// –î–ª—è –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
synchronize: configService.get<string>('SYNCHRONIZE') === 'true',
```

## üîÆ **–ß–¢–û –î–ê–õ–¨–®–ï**

–ê–≤—Ç–æ—Ä —É–ø–æ–º–∏–Ω–∞–µ—Ç –æ **–∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö** –¥–ª—è enterprise –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

> "But if you're dealing with enterprise applications applications which are large in scale, you might benefit from custom configuration files as well."

**–í —Å–ª–µ–¥—É—é—â–∏—Ö —É—Ä–æ–∫–∞—Ö –±—É–¥–µ—Ç:**

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö config —Å–µ—Ä–≤–∏—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Å—Ö–µ–º
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–≠—Ç–æ—Ç —É—Ä–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ NestJS! üöÄ
